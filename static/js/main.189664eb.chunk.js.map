{"version":3,"sources":["pages/feed/feed.module.css","pages/profile/profile.module.css","components/AppHeader/AppHeader.module.css","utils/hooks.ts","components/AppHeader/AppHeader.tsx","utils/constants.ts","utils/helpers.ts","services/actions/index.ts","utils/AuthApi.ts","services/actions/orderActions.ts","services/actions/modalActions.ts","components/BurgerIngredient/BurgerIngredient.tsx","components/BurgerIngredients/BurgerIngredients.tsx","services/actions/burgerActions.ts","components/ConstructorItem/ConstructorItem.tsx","components/BurgerConstructor/BurgerConstructor.tsx","components/OrderDetails/OrderDetails.tsx","components/IngredientDetails/IngredientDetails.tsx","components/ModalOverlay/ModalOverlay.tsx","components/Modal/Modal.tsx","components/CustomInput/CustomInput.tsx","utils/cookie.ts","services/actions/authActions.ts","pages/register/register.tsx","pages/login/login.tsx","pages/forgetPass/forgetPass.tsx","pages/resetPass/resetPass.tsx","components/ProfileMenu/ProfileMenu.tsx","services/actions/userActions.ts","pages/profile/profile.tsx","components/Order/Order.tsx","services/reducers/errorsReducer.ts","services/reducers/ingredientsListReducer.ts","services/reducers/constructorIngredientsReducer.ts","services/reducers/ingredientInfoReducer.ts","services/reducers/modalReducer.ts","services/reducers/orderReducer.ts","services/reducers/userInfoReducer.ts","services/actions/wsActions.ts","services/socketMiddleware.ts","services/reducers/wsReducer.ts","services/reducers/index.ts","services/store.ts","pages/profile/profileOrders.tsx","components/ProtectedRoute/ProtectedRoute.tsx","pages/ingredientDetail/ingredientDetail.tsx","pages/feed/feed.tsx","components/Order/OrderItem.tsx","components/App/App.tsx","index.tsx","components/CustomInput/CustomInput.module.css","components/IngredientDetails/IngredientDetails.module.css","components/BurgerIngredients/BurgerIngredients.module.css","components/BurgerIngredient/BurgerIngredient.module.css","components/BurgerConstructor/BurgerConstructor.module.css","components/Modal/Modal.module.css","components/Order/Order.module.css","components/App/App.module.css","components/ConstructorItem/constructor-item.module.css","components/OrderDetails/OrderDetails.module.css","components/ModalOverlay/ModalOverlay.module.css","pages/common.module.css"],"names":["module","exports","useAppDispatch","useDispatch","useAppSelector","useSelector","AppHeader","React","useState","userName","setUserName","location","useLocation","nameInfo","store","authInfoUser","user","name","useEffect","currentUserName","localStorage","getItem","className","styles","header","nav","list","to","link","type","pathname","active","indexOf","logo","mainApiUrl","emailRegxep","optionsDate","weekday","hour","minute","timeZoneName","getCookie","matches","document","cookie","match","RegExp","replace","decodeURIComponent","undefined","updateDate","date","options","Date","toLocaleDateString","authApi","url","_url","this","res","json","ok","console","log","status","Promise","reject","e","email","password","fetch","method","headers","Accept","body","JSON","stringify","then","handleResponse","catch","handleResponseError","code","token","refreshToken","Authorization","ingredients","orderNumber","GET_ORDER_REQUEST","GET_ORDER_SUCCESS","GET_ORDER_FAILED","DELETE_ORDER","getOrder","dispatch","payload","error","GET_SELECTED_INGREDIENT_INFO","DELETE_SELECTED_INGREDIENT_INFO","SHOW_MODAL","HIDE_MODAL","SHOW_MODAL_ORDER","HIDE_MODAL_ORDER","closeModals","SHOW_ERROR","HIDE_ERROR","SHOW_MODAL_ERROR","HIDE_MODAL_ERROR","showError","BurgerIngredient","image","price","ingredient","count","useDrag","item","collect","monitor","isDrag","isDragging","dragRef","_id","state","backgroundIngredient","onClick","getSelectedIngredient","ref","src","alt","size","BurgerIngredients","current","setCurrent","buns","getElementById","sauces","toppings","headerOfIngredients","burgerIngredients","constructorIngredients","constructorOfOrder","IsBun","isBuns","handleClickTypes","scrollIntoView","countOfIngredients","useMemo","map","filter","length","tabs","value","id","onScroll","bunsPos","Math","abs","getBoundingClientRect","top","saucePos","fillingPos","GET_INGREDIENTS_REQUEST","GET_INGREDIENTS_SUCCESS","GET_INGREDIENTS_FAILED","ADD_CONSTRUCTOR_INGREDIENT","DELETE_CONSTRUCTOR_INGREDIENT","MOVE_CONSTRUCTOR_INGREDIENT","addConstructorIngredient","ConstructorItem","index","useRef","useDrop","accept","hover","dragIndex","hoverIndex","hoverBoundingRect","hoverMiddleY","bottom","clientOffset","getClientOffset","hoverClientY","y","moveConstructorIngredient","drop","drag","opacity","style","handleClose","ingredientId","text","thumbnail","BurgerConstructor","openModalOrder","errors","isToken","history","useHistory","useReducer","action","totalPrice","reduce","acc","curr","Error","dispatchPrice","isHover","isOver","dropTarget","openModalError","handleCreateOrder","a","push","construct","isLocked","element","OrderDetails","order","container","number","wrapIcon","IngredientDetails","currentIngredient","burgerIngredient","image_large","details","calories","proteins","fat","carbohydrates","ModalOverlay","isModalOpened","closeModalOrder","overlay","overlayOpened","modalRoot","Modal","title","children","closeModal","closeModalEsc","useCallback","keyCode","addEventListener","removeEventListener","ReactDOM","createPortal","popup","popupOpened","titleWrap","CustomInput","props","placeholder","handleChange","isRequired","isCustom","typeInput","setTypeInput","onEyeClick","input_container","input_profile_label","onChange","required","input","input_profile","input_eye","input_pencil","input_label","setCookie","exp","expires","d","setTime","getTime","toUTCString","updatedCookie","encodeURIComponent","propName","propValue","CREATE_USER_REQUEST","CREATE_USER_SUCCESS","CREATE_USER_FAILED","LOGIN_USER_REQUEST","LOGIN_USER_SUCCESS","LOGIN_USER_FAILED","FORGET_PASSWORD_CODE","RESET_USER_PASSWORD","LOGOUT_USER_INFO","REFRESH_USER_TOKEN","afterRefresh","accessToken","split","setItem","RegisterPage","success","setName","setEmail","setPassword","setError","isValidityMail","form_container","onSubmit","evt","preventDefault","setTimeout","registerUser","createUser","noValidate","form_title","form_error","form_message","target","form_button","form_paragraph","LoginPage","from","loginUser","ForgetPassPage","message","isMailValid","forgetPassword","forgetUserPassword","ResetPassPage","setCode","resetPassword","resetUserPassword","ProfileMenu","profile_menu","profile_menu_list","profile_menu_item","profile_menu_item_active","logout","removeItem","profile_info","getUserInfo","UPDATE_USER_INFO_REQUEST","UPDATE_USER_INFO_SUCCESS","UPDATE_USER_INFO_FAILED","updateUserInfo","Profile","userEmail","profile_container","profile_data","profile_button_container","profile_button","profile_button_reset","Order","orderIngredients","find","orderPrice","prevValue","orderDate","createdAt","order_header","order_number","order_date","order_name","order_status","order_status_finished","order_status_cancelled","order_ingredients","order_img_container","order_img","image_mobile","zIndex","order_price_container","order_price","initialStateError","initialStateIngredients","ingredientsRequest","ingredientsFailed","isLoading","initialStateConstructor","initialStateIngredient","initialStateModal","isModalOpenedOrder","isModalOpenedError","initialStateOrder","orderRequest","orderFailed","initialUserInfo","userRequest","userRequestFail","WS_CONNECTION_START","WS_CONNECTION_SUCCESS","WS_GET_ORDERS","WS_SEND_MESSAGE","WS_CONNECTION_ERROR","WS_CONNECTION_CLOSED","wsActions","initialStateWS","wsConnected","wsError","data","orders","total","totalToday","rootReducer","combineReducers","uuidv4","splice","modal","ws","wsUrl","wsStart","wsSendMessage","onOpen","wsClose","onClose","onError","onGetOrders","wsPingPong","socketFeedOrdersMiddlware","socket","next","WebSocket","onopen","event","onerror","onmessage","parseData","parse","timestamp","onclose","close","send","enhancer","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","applyMiddleware","thunk","createStore","ProfileOrders","dataOrders","profile_orders_container","profile_orders_menu","profile_orders","profile_orders_list","profile_order","backgroundOrder","ProtectedRoute","render","IngredientDetailsPage","useParams","ingredient_button","Feed","wsDataOrders","ReadyOrders","WorkOrders","feed","feed_title","feed_orders","feed_orders_list","feed_order","feed_orders_summury","feed_orders_status","feed_orders_ready","feed_orders_title","feed_list","feed_orders_ready_item","feed_orders_work","feed_orders_work_item","order_count","feed_orders_count","memo","OrderItem","setOrder","getCurrentOrder","order_item","order_item_name","order_title","order_ingredients_container","order_ingredient_item","order_ingredient_container","order_ingredient_img","order_ingredient_name","order_total","App","exact","path","wrap","DndProvider","backend","HTML5Backend","Object","values","StrictMode"],"mappings":"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","file":"static/js/main.189664eb.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"feed\":\"feed_feed__3EgtT\",\"feed_title\":\"feed_feed_title__3Ef7i\",\"feed_orders\":\"feed_feed_orders__GgMq5\",\"feed_orders_list\":\"feed_feed_orders_list__28lp3\",\"feed_order\":\"feed_feed_order__SmMO-\",\"feed_orders_summury\":\"feed_feed_orders_summury__1hM6J\",\"feed_orders_status\":\"feed_feed_orders_status__1NjEr\",\"feed_orders_title\":\"feed_feed_orders_title__1CfB1\",\"feed_orders_ready\":\"feed_feed_orders_ready__1aXy3\",\"feed_orders_work\":\"feed_feed_orders_work__1I8RO\",\"feed_list\":\"feed_feed_list__3q2v8\",\"feed_orders_work_item\":\"feed_feed_orders_work_item__3zLw6\",\"feed_orders_ready_item\":\"feed_feed_orders_ready_item__oy6qp\",\"feed_orders_count\":\"feed_feed_orders_count__1Pun8\",\"order_count\":\"feed_order_count__1uuGl\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profile_container\":\"profile_profile_container__feyA_\",\"profile_menu_list\":\"profile_profile_menu_list__3775M\",\"profile_menu_item\":\"profile_profile_menu_item__1_ngQ\",\"profile_menu_item_active\":\"profile_profile_menu_item_active__3PcDq\",\"profile_info\":\"profile_profile_info__3nJyk\",\"profile_data\":\"profile_profile_data__1m4Eo\",\"profile_orders\":\"profile_profile_orders__2x000\",\"profile_orders_list\":\"profile_profile_orders_list__2cV1T\",\"profile_orders_container\":\"profile_profile_orders_container__2VwUq\",\"profile_order\":\"profile_profile_order__DeCxt\",\"profile_orders_menu\":\"profile_profile_orders_menu__3T72S\",\"profile_button_container\":\"profile_profile_button_container__2J6Qv\",\"profile_button\":\"profile_profile_button__81_OA\",\"profile_button_reset\":\"profile_profile_button_reset___4_3j\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"AppHeader_header__1ztE6\",\"nav\":\"AppHeader_nav__1a9xq\",\"list\":\"AppHeader_list__2LlBf\",\"list-item\":\"AppHeader_list-item__3Rgsp\",\"list-item_profile\":\"AppHeader_list-item_profile__lMB8g\",\"logo\":\"AppHeader_logo__RxpaK\",\"link\":\"AppHeader_link__3IUti\",\"active\":\"AppHeader_active__2LsZB\"};","import { useDispatch, TypedUseSelectorHook, useSelector } from \"react-redux\"\r\nimport { Dispatch, RootState } from \"../services/store\"\r\n\r\nexport const useAppDispatch = () => useDispatch<Dispatch>();\r\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;","import { BurgerIcon, ListIcon, Logo, ProfileIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport React from 'react';\r\nimport styles from './AppHeader.module.css';\r\nimport { Link, useLocation } from \"react-router-dom\";\r\nimport { useAppSelector } from '../../utils/hooks';\r\n\r\nfunction AppHeader() {\r\n  const [userName, setUserName] = React.useState<string>(\"\");\r\n  const location = useLocation();\r\n\r\n  const nameInfo = useAppSelector(\r\n    (store) => ({\r\n      nameInfo: store.authInfoUser.user.name,\r\n    })\r\n  );\r\n\r\n  React.useEffect(() => {\r\n    const currentUserName = localStorage.getItem(\"userName\");\r\n    currentUserName && setUserName(currentUserName);\r\n  }, [nameInfo]);\r\n\r\n  return (\r\n    <header className={styles.header}>\r\n      <nav className={styles.nav}>\r\n        <ul className={styles.list}>\r\n          <li className={`${styles['list-item']} pr-5 pl-5 pt-4 pb-4`}>\r\n            <Link to=\"/\" className={styles.link}>\r\n              <BurgerIcon type=\"primary\" />\r\n              <p className={`text text_type_main-default p-2 ${location.pathname === \"/\" && styles.active}`}></p>\r\n            </Link>\r\n          </li>\r\n          <li className={`${styles['list-item']} pr-5 pl-5 pt-4 pb-4`}>\r\n            <Link to=\"/feed\" className={styles.link}>\r\n              <ListIcon type={\r\n                location.pathname.indexOf(\"/feed\") >= 0\r\n                  ? \"primary\"\r\n                  : \"secondary\"\r\n                }\r\n              />\r\n              <p className=\"text text_type_main-default text_color_inactive p-2\"> </p>\r\n            </Link>\r\n          </li>\r\n          <li className={`${styles['list-item']} ${styles['list-item_profile']} pr-5 pl-5 pt-4 pb-4`}>\r\n            <Link to=\"/profile\" className={styles.link}>\r\n              <ProfileIcon type={\r\n                  location.pathname.indexOf(\"/profile\") >= 0\r\n                    ? \"primary\"\r\n                    : \"secondary\"\r\n                } \r\n              />\r\n              <p className={`text text_type_main-default text_color_inactive p-2 ${location.pathname === \"/profile\" && styles.active}`}>{userName ? userName : \" \"}</p>\r\n            </Link>\r\n          </li>\r\n        </ul>\r\n      </nav>\r\n      <div className={styles.logo}>\r\n        {/* Logo here because in tag ul not li can be used */}\r\n        <Link to=\"/\">\r\n          <Logo /> \r\n        </Link>\r\n      </div>\r\n    </header>\r\n  );\r\n}\r\n\r\nexport default AppHeader;","export const mainApiUrl: string = 'https://norma.nomoreparties.space/api';\r\nexport const keyCodeEsc: number = 27;\r\nexport const emailRegxep: RegExp =\r\n  /^(([^<>()[\\]\\\\.,;:\\s@ \"]+(\\.[^<>()[\\]\\\\.,;:\\s@ \"]+)*)|( \".+ \"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n\r\nexport const optionsDate = {\r\n  weekday: \"long\" as const,\r\n  hour: \"2-digit\" as const,\r\n  minute: \"2-digit\" as const,\r\n  timeZoneName: \"short\" as const,\r\n};","export function getCookie(name: string): string | undefined {\r\n  const matches = document.cookie.match(\r\n    new RegExp(\"(?:^|; )\" + name.replace(/([ .$?*|{} ( ) [\\]\\\\ / +^])/g, \"\\\\$1\") + \"=([^;]*)\")\r\n  );\r\n  return matches ? decodeURIComponent(matches[1]) : undefined;\r\n}\r\n\r\nexport const updateDate = (date: number, options: Intl.DateTimeFormatOptions) => {\r\n  return new Date(date).toLocaleDateString(\"ru-RU\", options);\r\n};","import { mainApiUrl } from '../../utils/constants';\r\nimport AuthApi from '../../utils/AuthApi';\r\nexport const authApi = new AuthApi(mainApiUrl);","import { getCookie } from \"./helpers\";\r\n\r\nclass AuthApi {\r\n  _url: string;\r\n  \r\n  constructor(url) {\r\n    this._url = url;\r\n  }\r\n  response(res) {\r\n    return res.json();\r\n  }\r\n\r\n  handleResponse(res: Response) {\r\n    if (res.ok) {\r\n      return res.json();\r\n    } else {\r\n      console.log(res.status);\r\n      return Promise.reject(res);\r\n    }\r\n  }\r\n\r\n  handleResponseError(e: Event) {\r\n    console.log(e);\r\n    return Promise.reject(e);\r\n  }\r\n  \r\n  registerUser(email: string, password: string, name: string) {\r\n    return fetch(`${this._url}/auth/register`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        email: `${email}`,\r\n        password: `${password}`,\r\n        name: `${name}`,\r\n      }),\r\n    })\r\n      .then(this.handleResponse)\r\n      .catch(this.handleResponseError);\r\n  }\r\n\r\n  loginUser(email: string, password: string) {\r\n    return fetch(`${this._url}/auth/login`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        email: `${email}`,\r\n        password: `${password}`,\r\n      }),\r\n    })\r\n      .then(this.handleResponse)\r\n      .catch(this.handleResponseError);\r\n  }\r\n\r\n  forgetPassword(email: string) {\r\n    return fetch(`${this._url}/password-reset`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({ email: `${email}` }),\r\n    })\r\n      .then(this.handleResponse)\r\n      .catch(this.handleResponseError);\r\n  }\r\n\r\n  resetPassword(password: string, code: string) {\r\n    return fetch(`${this._url}/password-reset/reset`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({ password: `${password}`, token: `${code}` }),\r\n    })\r\n      .then(this.handleResponse)\r\n      .catch(this.handleResponseError);\r\n  }\r\n\r\n  logout(refreshToken: string) {\r\n    return fetch(`${this._url}/auth/logout`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        token: `${refreshToken}`,\r\n      }),\r\n    })\r\n      .then(this.handleResponse)\r\n      .catch(this.handleResponseError);\r\n  }\r\n\r\n  refreshToken(refreshToken: string | null) {\r\n    return fetch(`${this._url}/auth/token`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        token: `${refreshToken}`,\r\n      }),\r\n    })\r\n      .then(this.handleResponse)\r\n      .catch(this.handleResponseError);\r\n  }\r\n\r\n  getUserInfo() {\r\n    return fetch(`${this._url}/auth/user`, {\r\n      method: \"GET\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + getCookie(\"token\"),\r\n      },\r\n    })\r\n      .then((res) => (res.json()))\r\n      .catch(this.handleResponseError);\r\n  }\r\n\r\n  updateUserInfo(name: string, email: string, password: string) {\r\n    return fetch(`${this._url}/auth/user`, {\r\n      method: \"PATCH\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + getCookie(\"token\"),\r\n      },\r\n      body: JSON.stringify({\r\n        name: `${name}`,\r\n        email: `${email}`,\r\n        password: `${password}`,\r\n      }),\r\n    })\r\n      .then(this.handleResponse)\r\n      .catch(this.handleResponseError);\r\n  }\r\n\r\n  getOrder(ingredients: []) {\r\n    return fetch(`${this._url}/orders`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + getCookie(\"token\"),\r\n      },\r\n      body: JSON.stringify({ ingredients: ingredients }),\r\n    })\r\n      .then(this.handleResponse)\r\n      .catch(this.handleResponseError);\r\n  }\r\n\r\n  getCurrentOrder(orderNumber?: string) {\r\n    return fetch(`${this._url}/orders/${orderNumber}`, {\r\n      method: \"GET\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    })\r\n      .then(this.handleResponse)\r\n      .catch(this.handleResponseError);\r\n  }\r\n}\r\n\r\nexport default AuthApi;","import { authApi } from \".\";\r\nimport { Dispatch } from \"../store\";\r\n\r\nexport const GET_ORDER_REQUEST: \"GET_ORDER_REQUEST\" = \"GET_ORDER_REQUEST\";\r\nexport const GET_ORDER_SUCCESS: \"GET_ORDER_SUCCESS\" = \"GET_ORDER_SUCCESS\";\r\nexport const GET_ORDER_FAILED: \"GET_ORDER_FAILED\" = \"GET_ORDER_FAILED\";\r\nexport const DELETE_ORDER: \"DELETE_ORDER\" = \"DELETE_ORDER\";\r\nexport const REMOVE_ORDER: \"REMOVE_ORDER\" = \"REMOVE_ORDER\";\r\nexport const GET_SELECTED_ORDER: \"GET_SELECTED_ORDER\" = \"GET_SELECTED_ORDER\";\r\nexport const REMOVE_SELECTED_ORDER: \"REMOVE_SELECTED_ORDER\" = \"REMOVE_SELECTED_ORDER\";\r\n\r\nexport function getOrder(ingredients) {\r\n  return (dispatch: Dispatch) => {\r\n    dispatch({\r\n      type: GET_ORDER_REQUEST,\r\n    });\r\n\r\n    authApi.getOrder(ingredients)\r\n      .then((res) => {\r\n        dispatch({\r\n          type: GET_ORDER_SUCCESS,\r\n          payload: res,\r\n        });\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n        dispatch({\r\n          type: GET_ORDER_FAILED,\r\n        });\r\n      });\r\n  };\r\n}\r\n\r\nexport function hideOrder() {\r\n  return {\r\n    type: REMOVE_ORDER,\r\n  };\r\n}\r\n\r\nexport function getSelectedOrder(currentOrder) {\r\n  return {\r\n    type: GET_SELECTED_ORDER,\r\n    payload: currentOrder,\r\n  };\r\n}\r\n\r\nexport function removeSelectedOrder() {\r\n  return {\r\n    type: REMOVE_SELECTED_ORDER,\r\n  };\r\n}\r\n\r\n","import { Dispatch } from \"../store\";\r\nimport { DELETE_ORDER } from \"./orderActions\";\r\n\r\n// Selected ingredients\r\nexport const GET_SELECTED_INGREDIENT_INFO: \"GET_SELECTED_INGREDIENT_INFO\" = \"GET_SELECTED_INGREDIENT_INFO\";\r\nexport const DELETE_SELECTED_INGREDIENT_INFO: \"DELETE_SELECTED_INGREDIENT_INFO\" = \"DELETE_SELECTED_INGREDIENT_INFO\";\r\n\r\nexport function getSelectedIngredient(ingredient) {\r\n  return {\r\n    type: GET_SELECTED_INGREDIENT_INFO,\r\n    payload: ingredient,\r\n  };\r\n}\r\n\r\nexport function deleteSelectedIngredient() {\r\n  return {\r\n    type: DELETE_SELECTED_INGREDIENT_INFO,\r\n  };\r\n}\r\n\r\n// Other \r\nexport const SHOW_MODAL: \"SHOW_MODAL\" = \"SHOW_MODAL\";\r\nexport const HIDE_MODAL: \"HIDE_MODAL\" = \"HIDE_MODAL\";\r\nexport const SHOW_MODAL_ORDER: \"SHOW_MODAL_ORDER\" = \"SHOW_MODAL_ORDER\";\r\nexport const HIDE_MODAL_ORDER: \"HIDE_MODAL_ORDER\" = \"HIDE_MODAL_ORDER\";\r\n\r\nexport function closeModals() {\r\n  return (dispatch: Dispatch) => {\r\n    dispatch(deleteSelectedIngredient());\r\n    dispatch(closeOrder());\r\n  };\r\n}\r\n\r\nexport function showModal() {\r\n  return {\r\n    type: SHOW_MODAL,\r\n  };\r\n}\r\n\r\nexport function hideModal() {\r\n  return {\r\n    type: HIDE_MODAL,\r\n  };\r\n}\r\n\r\nexport function showModalOrder() {\r\n  return {\r\n    type: SHOW_MODAL_ORDER,\r\n  };\r\n}\r\n\r\nexport function hideModalOrder() {\r\n  return {\r\n    type: HIDE_MODAL_ORDER,\r\n  };\r\n}\r\n\r\nexport function closeOrder() {\r\n  return {\r\n    type: DELETE_ORDER,\r\n  };\r\n}\r\n\r\n// Errors \r\nexport const SHOW_ERROR: \"SHOW_ERROR\" = \"SHOW_ERROR\";\r\nexport const HIDE_ERROR: \"HIDE_ERROR\" = \"HIDE_ERROR\";\r\nexport const SHOW_MODAL_ERROR: \"SHOW_MODAL_ERROR\" = \"SHOW_MODAL_ERROR\";\r\nexport const HIDE_MODAL_ERROR: \"HIDE_MODAL_ERROR\" = \"HIDE_MODAL_ERROR\";\r\n\r\nexport function showError(error) {\r\n  return {\r\n    type: SHOW_ERROR,\r\n    payload: error,\r\n  };\r\n}\r\n\r\nexport function hideError() {\r\n  return {\r\n    type: HIDE_ERROR,\r\n  };\r\n}\r\n\r\nexport function showModalError() {\r\n  return {\r\n    type: SHOW_MODAL_ERROR,\r\n  };\r\n}\r\n\r\nexport function hideModalError() {\r\n  return {\r\n    type: HIDE_MODAL_ERROR,\r\n  };\r\n}\r\n","import { Counter, CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport React from 'react';\r\nimport styles from './BurgerIngredient.module.css';\r\nimport { useDrag } from \"react-dnd\";\r\nimport { Link, useLocation } from \"react-router-dom\";\r\nimport { IIngredient } from '../../interfaces/interfaces';\r\nimport { getSelectedIngredient, showModal } from '../../services/actions/modalActions';\r\nimport { useAppDispatch } from '../../utils/hooks';\r\n\r\ninterface IBurgerIngredient {\r\n  image: string;\r\n  name: string;\r\n  price: number;\r\n  ingredient: IIngredient;\r\n  count: number;\r\n}\r\n\r\nfunction BurgerIngredient({ image, name, price, ingredient, count }: IBurgerIngredient): JSX.Element | null {\r\n  const dispatch = useAppDispatch();\r\n  const location = useLocation();\r\n\r\n  function handleAddIngredient() {\r\n    dispatch(getSelectedIngredient(ingredient));\r\n    dispatch(showModal())\r\n  }\r\n\r\n  const [{ isDrag }, dragRef] = useDrag({\r\n    type: \"dragIngredient\",\r\n    item: ingredient,\r\n    collect: (monitor) => ({\r\n      isDrag: monitor.isDragging(),\r\n    }),\r\n  });\r\n\r\n  return !isDrag ? (\r\n    <Link\r\n      className={styles.link}\r\n      to={{\r\n        pathname: `/ingredients/${ingredient._id}`,\r\n        state: { backgroundIngredient: location },\r\n      }}\r\n    >\r\n      <li className={styles.ingredient} onClick={handleAddIngredient} ref={dragRef}>\r\n          <img src={image} alt={name} />\r\n          <div className={styles['price-wrap']}>\r\n            <p className=\"text text_type_digits-default mt-2 mb-2 mr-2\">{price}</p>\r\n            <CurrencyIcon type=\"primary\" />\r\n          </div>\r\n          <p className={`${styles.name} text text_type_main-default`}>{name}</p>\r\n          <Counter count={count} size=\"default\" />\r\n      </li>\r\n    </Link>\r\n  ): null;\r\n}\r\n\r\nexport default BurgerIngredient;","import { Tab } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport React, { useMemo } from 'react';\r\nimport BurgerIngredient from '../BurgerIngredient/BurgerIngredient';\r\nimport styles from './BurgerIngredients.module.css';\r\n\r\nimport { useAppSelector } from '../../utils/hooks';\r\n\r\nfunction BurgerIngredients(): JSX.Element | null {\r\n  const [current, setCurrent] = React.useState<string>('buns')\r\n  const buns: HTMLElement | null = document.getElementById(\"buns\");\r\n  const sauces: HTMLElement | null = document.getElementById(\"sauces\");\r\n  const toppings: HTMLElement | null = document.getElementById(\"toppings\");\r\n  const headerOfIngredients: HTMLElement | null = document.getElementById(\"ingredients\");\r\n  const { ingredients, constructorIngredients, IsBun } = useAppSelector(\r\n    (store) => ({\r\n      ingredients: store.burgerIngredients.ingredients,\r\n      constructorIngredients: store.constructorOfOrder.constructorIngredients,\r\n      IsBun: store.constructorOfOrder.isBuns,\r\n    })\r\n  );\r\n  \r\n  const handleClickTypes = (e: string, type: string): void => {\r\n    setCurrent(e)\r\n    document.getElementById(type)?.scrollIntoView();\r\n  }\r\n\r\n  const countOfIngredients = useMemo(() => {\r\n    return ingredients.map((ingredient: any) => {\r\n      ingredient.count = constructorIngredients.filter(\r\n        (item) => item._id === ingredient._id\r\n      ).length;\r\n      if (IsBun && IsBun._id === ingredient._id) ingredient.count += 2;\r\n      return ingredient;\r\n    });\r\n  }, [ingredients, constructorIngredients, IsBun]);\r\n\r\n  const onScrollIngredients = (): void => {\r\n    if (headerOfIngredients && buns && sauces && toppings) {\r\n      const bunsPos = Math.abs(\r\n        buns.getBoundingClientRect().top -\r\n        headerOfIngredients.getBoundingClientRect().top\r\n      );\r\n      const saucePos = Math.abs(\r\n        sauces.getBoundingClientRect().top -\r\n        headerOfIngredients.getBoundingClientRect().top\r\n      );\r\n      const fillingPos = Math.abs(\r\n        toppings.getBoundingClientRect().top -\r\n        headerOfIngredients.getBoundingClientRect().top\r\n      );\r\n  \r\n      if (bunsPos < saucePos && bunsPos < fillingPos) {\r\n        setCurrent(\"buns\");\r\n      }\r\n      if (saucePos < bunsPos && saucePos < fillingPos) {\r\n        setCurrent(\"sauces\");\r\n      }\r\n      if (fillingPos < bunsPos && fillingPos < saucePos) {\r\n        setCurrent(\"toppings\");\r\n      }\r\n    }\r\n    \r\n  };\r\n  return (\r\n    <section>\r\n      <h1 className=\"text text_type_main-large\"> </h1>\r\n      <div className={`${styles.tabs} pt-5`}>\r\n        <Tab value=\"buns\" active={current === 'buns'} onClick={(e)=>handleClickTypes(e, 'buns')}>\r\n          \r\n        </Tab>\r\n        <Tab value=\"sauces\" active={current === 'sauces'} onClick={(e)=>handleClickTypes(e, 'sauces')}>\r\n          \r\n        </Tab>\r\n        <Tab value=\"toppings\" active={current === 'toppings'} onClick={(e)=>handleClickTypes(e, 'toppings')}>\r\n          \r\n        </Tab>\r\n      </div>\r\n      <div id=\"ingredients\" className={styles.ingredients} onScroll={onScrollIngredients}>\r\n        <h2 id=\"buns\" className=\"text text_type_main-medium mt-10 mb-6\"></h2>\r\n        {ingredients && <ul className={styles['list-ingredients']}>\r\n          {countOfIngredients.map((ingredient) => {\r\n            return ingredient.type === 'bun' ? \r\n              <BurgerIngredient\r\n                key={ingredient._id}\r\n                image={ingredient.image}\r\n                name={ingredient.name}\r\n                price={ingredient.price}\r\n                ingredient={ingredient}\r\n                count={ingredient.count}\r\n              /> : '';\r\n          })}\r\n        </ul>}\r\n        <h2 id=\"sauces\" className=\"text text_type_main-medium mt-10 mb-6\"></h2>\r\n        <ul className={styles['list-ingredients']}>\r\n          {countOfIngredients.map((ingredient) => {\r\n            return ingredient.type === 'sauce' ? \r\n              <BurgerIngredient\r\n                key={ingredient._id}\r\n                image={ingredient.image}\r\n                name={ingredient.name}\r\n                price={ingredient.price}\r\n                ingredient={ingredient}\r\n                count={ingredient.count}\r\n              /> : '';\r\n          })}\r\n        </ul>\r\n        <h2 id=\"toppings\" className=\"text text_type_main-medium mt-10 mb-6\"></h2>\r\n        <ul className={styles['list-ingredients']}>\r\n          {countOfIngredients.map((ingredient) => {\r\n            return ingredient.type === 'main' ? \r\n              <BurgerIngredient\r\n                key={ingredient._id}\r\n                image={ingredient.image}\r\n                name={ingredient.name}\r\n                price={ingredient.price}\r\n                ingredient={ingredient}\r\n                count={ingredient.count}\r\n              /> : '';\r\n          })}\r\n        </ul>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default BurgerIngredients;","\r\nimport { mainApiUrl } from \"../../utils/constants\";\r\nimport { Dispatch } from \"../store\";\r\n\r\n// Ingredients of Burger\r\nexport const GET_INGREDIENTS_REQUEST: \"GET_INGREDIENTS_REQUEST\" = \"GET_INGREDIENTS_REQUEST\";\r\nexport const GET_INGREDIENTS_SUCCESS: \"GET_INGREDIENTS_SUCCESS\" = \"GET_INGREDIENTS_SUCCESS\";\r\nexport const GET_INGREDIENTS_FAILED: \"GET_INGREDIENTS_FAILED\" = \"GET_INGREDIENTS_FAILED\";\r\n\r\nexport function getIngredients() {\r\n  return (dispatch: Dispatch) => {\r\n    dispatch({\r\n      type: GET_INGREDIENTS_REQUEST,\r\n    });\r\n    fetch(`${mainApiUrl}/ingredients`)\r\n      .then((res) => {\r\n        if (res.ok) {\r\n          return res.json();\r\n        } else {\r\n          return Promise.reject(res);\r\n        }\r\n      })\r\n      .then((res) => {\r\n        dispatch({\r\n          type: GET_INGREDIENTS_SUCCESS,\r\n          payload: res.data,\r\n        });\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n        // dispatch(showError(error));\r\n        dispatch({\r\n          type: GET_INGREDIENTS_FAILED,\r\n        });\r\n      });\r\n  };\r\n}\r\n\r\n// Constructor of Burger\r\nexport const ADD_CONSTRUCTOR_INGREDIENT: \"ADD_CONSTRUCTOR_INGREDIENT\" = \"ADD_CONSTRUCTOR_INGREDIENT\";\r\nexport const DELETE_CONSTRUCTOR_INGREDIENT: \"DELETE_CONSTRUCTOR_INGREDIENT\" = \"DELETE_CONSTRUCTOR_INGREDIENT\";\r\nexport const MOVE_CONSTRUCTOR_INGREDIENT: \"MOVE_CONSTRUCTOR_INGREDIENT\" = \"MOVE_CONSTRUCTOR_INGREDIENT\";\r\n\r\nexport function addConstructorIngredient(ingredient) {\r\n  return {\r\n    type: ADD_CONSTRUCTOR_INGREDIENT,\r\n    payload: ingredient,\r\n  };\r\n}\r\n\r\nexport function deleteConstructorIngredient(ingredientId) {\r\n  return {\r\n    type: DELETE_CONSTRUCTOR_INGREDIENT,\r\n    payload: ingredientId,\r\n  };\r\n}\r\n\r\nexport function moveConstructorIngredient({ dragIndex, hoverIndex }) {\r\n  return {\r\n    type: MOVE_CONSTRUCTOR_INGREDIENT,\r\n    payload: { dragIndex, hoverIndex },\r\n  };\r\n}\r\n\r\n","import { useRef } from 'react';\r\nimport { DropTargetMonitor, useDrag, useDrop } from 'react-dnd';\r\nimport styles from './constructor-item.module.css';\r\nimport {DragIcon} from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { ConstructorElement } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { IIngredient } from '../../interfaces/interfaces';\r\nimport { deleteConstructorIngredient, moveConstructorIngredient } from '../../services/actions/burgerActions';\r\nimport { useAppDispatch } from '../../utils/hooks';\r\n\r\ntype TIngredientId = {\r\n  ingredientId: string;\r\n}\r\n\r\ninterface IConstructorItem {\r\n  ingredient: IIngredient & TIngredientId;\r\n  index: number;\r\n}\r\n\r\nconst ConstructorItem = ({ingredient, index }: IConstructorItem) => {\r\n    const id: string = ingredient._id;\r\n    const ref = useRef<HTMLLIElement>(null);\r\n    const dispatch = useAppDispatch();\r\n    \r\n    const [, drop] = useDrop({\r\n      accept: \"constructor\",\r\n      hover(item: {index: number}, monitor: DropTargetMonitor) {\r\n        if (!ref.current) {\r\n          return;\r\n        }\r\n\r\n        const [dragIndex, hoverIndex] = [item.index, index];\r\n        if (!dragIndex || dragIndex === hoverIndex) {\r\n          return;\r\n        }\r\n\r\n        const hoverBoundingRect = ref.current?.getBoundingClientRect();\r\n        const hoverMiddleY = (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2;\r\n        const clientOffset = monitor.getClientOffset();\r\n        if (!clientOffset) return;\r\n\r\n        const hoverClientY = clientOffset.y - hoverBoundingRect.top;\r\n        if (dragIndex < hoverIndex && hoverClientY < hoverMiddleY) return;\r\n        if (dragIndex > hoverIndex && hoverClientY > hoverMiddleY) return;\r\n        dispatch(moveConstructorIngredient({ dragIndex, hoverIndex }));\r\n        item.index = hoverIndex;\r\n      }\r\n    });\r\n\r\n    const [{isDragging}, drag] = useDrag({\r\n      type: \"constructor\",\r\n      item: {id, index},\r\n      collect: (monitor) => ({\r\n          isDragging: monitor.isDragging(),\r\n      }),\r\n    });\r\n    \r\n    drag(drop(ref));\r\n    const opacity = isDragging ? 0 : 1;\r\n    return (\r\n      <div className={styles['list-item-wrap']} key={ingredient.ingredientId} style={{ opacity }}>\r\n        <DragIcon type=\"primary\" />\r\n        <li ref={ref} className={styles.ingredient}>\r\n          <ConstructorElement\r\n            handleClose={() => dispatch(deleteConstructorIngredient(ingredient.ingredientId))}\r\n            text={ingredient.name}\r\n            price={ingredient.price}\r\n            thumbnail={ingredient.image}\r\n          />\r\n        </li>\r\n      </div>\r\n    );\r\n}\r\n\r\nexport default ConstructorItem;","import { Button, ConstructorElement, CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport React from 'react';\r\nimport styles from './BurgerConstructor.module.css';\r\nimport { useDrop} from \"react-dnd\";\r\nimport ConstructorItem from '../ConstructorItem/ConstructorItem';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { addConstructorIngredient } from '../../services/actions/burgerActions';\r\nimport { getOrder } from '../../services/actions/orderActions';\r\nimport { showError, showModalError } from '../../services/actions/modalActions';\r\nimport { useAppDispatch, useAppSelector } from '../../utils/hooks';\r\n\r\ninterface IBurgerConstructor {\r\n  openModalOrder: () => void;\r\n}\r\n\r\nfunction BurgerConstructor({ \r\n    openModalOrder,\r\n  }: IBurgerConstructor): JSX.Element {\r\n  const dispatch = useAppDispatch();\r\n  const {constructorIngredients, IsBun } = useAppSelector(\r\n    (store) => ({\r\n      constructorIngredients: store.constructorOfOrder.constructorIngredients,\r\n      IsBun: store.constructorOfOrder.isBuns,\r\n      error: store.errors.error\r\n    })\r\n  );\r\n  const isToken = localStorage.getItem(\"refreshToken\");\r\n  const history = useHistory();\r\n\r\n  // get total price\r\n  const [totalPrice, dispatchPrice] = React.useReducer(reducer, {totalPrice: 0}, undefined )\r\n  function reducer(state, action) {\r\n    switch (action.type) {\r\n      case \"ount\":\r\n        return { totalPrice: constructorIngredients.reduce((acc, curr) => acc + curr.price, 0 )}\r\n      default:\r\n        throw new Error(`Wrong type of action: ${action.type}`);\r\n    }\r\n  }\r\n\r\n  const [, dropTarget] = useDrop({\r\n    accept: \"dragIngredient\",\r\n    drop(ingredient) {\r\n      dispatch(addConstructorIngredient(ingredient));\r\n    },\r\n    collect: (monitor) => ({\r\n      isHover: monitor.isOver(),\r\n    }),\r\n  });\r\n\r\n  const getBunsPrice = (): number => {\r\n    if (IsBun === null) return 0;\r\n    return IsBun.price * 2;\r\n  }\r\n\r\n  function openModalError(error) {\r\n    dispatch(showError(error))\r\n    dispatch(showModalError())\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    dispatchPrice({type: 'ount'})\r\n  }, [constructorIngredients])\r\n\r\n    const handleCreateOrder = async () => {\r\n      if (IsBun === null) return;\r\n      constructorIngredients.push(IsBun);\r\n      if ((IsBun && !isToken) || (!IsBun && !isToken)) {\r\n        history.push(\"/login\");\r\n      } else {\r\n        openModalOrder()\r\n        dispatch(getOrder(constructorIngredients));\r\n      }\r\n    }\r\n\r\n  return (\r\n    <section className={`${styles.construct} mt-10`}  id=\"dropTarget\" ref={dropTarget}>\r\n      <div className=\"ml-4 mt-4\">\r\n        { IsBun && <ConstructorElement\r\n          type=\"top\"\r\n          isLocked={true}\r\n          text={`${IsBun.name} ()`}\r\n          price={IsBun.price}\r\n          thumbnail={IsBun.image}\r\n        />}\r\n      </div>\r\n      \r\n      <ul className={styles['list-ingredients']}>\r\n        {constructorIngredients && constructorIngredients.map((element, index) => {\r\n          return element.type === 'bun' ? '' :\r\n            <ConstructorItem ingredient={element} key={element.ingredientId} index={index}/>\r\n          }\r\n        )}\r\n      </ul>\r\n      <div className=\"ml-4\">\r\n        {IsBun &&  <ConstructorElement\r\n            type=\"bottom\"\r\n            isLocked={true}\r\n            text={`${IsBun.name} ()`}\r\n            price={IsBun.price}\r\n            thumbnail={IsBun.image}\r\n          />}\r\n      </div>\r\n      <div className={`${styles['order-wrap']} mt-10`}>\r\n        <div className={styles['price-wrap']}>\r\n          <p className=\"text text_type_digits-medium\">{totalPrice.totalPrice + getBunsPrice()}</p>\r\n          <CurrencyIcon type=\"primary\" />\r\n        </div>\r\n        <Button type=\"primary\" size=\"large\"  onClick={() => {\r\n          if (IsBun !== null && constructorIngredients.length > 0) {\r\n            handleCreateOrder()\r\n          } else {openModalError({error: '    2    1 '})}\r\n        }}> \r\n           \r\n        </Button>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default BurgerConstructor;","import React from 'react';\r\nimport { useAppSelector } from '../../utils/hooks';\r\nimport styles from './OrderDetails.module.css';\r\n\r\nfunction OrderDetails(): JSX.Element | null {\r\n  const { order } = useAppSelector(\r\n    (store) => ({\r\n      order: store.order.order,\r\n    })\r\n  );\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      {order ? <p className=\"text text_type_digits-large mt-9\">{order.order.number}</p> : '...'}\r\n      <p className=\"text text_type_main-medium mt-8 mb-15\"> </p>\r\n      <div className={styles.wrapIcon}>\r\n      </div>\r\n      <p className=\"text text_type_main-default mt-15\">   </p>\r\n      <p className=\"text text_type_main-default text_color_inactive mt-2 mb-30\">    </p>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default OrderDetails;","import styles from './IngredientDetails.module.css';\r\nimport { useAppSelector } from '../../utils/hooks';\r\n\r\n\r\nfunction IngredientDetails(): JSX.Element | null {\r\n  const { currentIngredient } = useAppSelector((store) => ({\r\n    currentIngredient: store.burgerIngredient.currentIngredient,\r\n  }));\r\n\r\n  return currentIngredient &&(\r\n    <div className={`${styles.container} mb-15`}>\r\n      <img src={currentIngredient.image_large} alt={currentIngredient.name}/>\r\n      <p className=\"text text_type_main-medium mt-6 mb-10\">{currentIngredient.name}</p>\r\n        <ul className={styles.details}>\r\n          <li className={styles.list}>\r\n            <p className=\"text text_type_main-default text_color_inactive\">,</p>\r\n            <p className=\"text ttext_type_digits-default text_color_inactive\">{currentIngredient.calories}</p>\r\n          </li>\r\n          <li>\r\n            <p className=\"text text_type_main-default text_color_inactive\">, </p>\r\n            <p className=\"text text_type_digits-default text_color_inactive\">{currentIngredient.proteins}</p>\r\n          </li>\r\n          <li>\r\n            <p className=\"text text_type_main-default text_color_inactive\">, </p>\r\n            <p className=\"text text_type_digits-default text_color_inactive\">{currentIngredient.fat}</p>\r\n          </li>\r\n          <li>\r\n            <p className=\"text text_type_main-default text_color_inactive\">, </p>\r\n            <p className=\"text text_type_digits-default text_color_inactive\">{currentIngredient.carbohydrates}</p>\r\n          </li>\r\n        </ul>\r\n    </div>\r\n  )\r\n}\r\nexport default IngredientDetails;","import React from 'react';\r\nimport styles from './ModalOverlay.module.css';\r\n\r\ninterface IModalOverlay {\r\n  isModalOpened: boolean;\r\n  closeModalOrder: () => void;\r\n}\r\n\r\nfunction ModalOverlay({ isModalOpened, closeModalOrder }: IModalOverlay): JSX.Element | null {\r\n  return (\r\n    <div onClick={closeModalOrder} className={`${styles.overlay} ${isModalOpened ? styles.overlayOpened : ''}`}></div>\r\n  )\r\n}\r\n\r\nexport default ModalOverlay;","import React from 'react';\r\nimport styles from './Modal.module.css';\r\nimport { CloseIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport ReactDOM from 'react-dom';\r\nimport ModalOverlay from '../ModalOverlay/ModalOverlay';\r\nimport { keyCodeEsc } from '../../utils/constants';\r\n\r\nconst modalRoot = document.getElementById(\"modal\");\r\n\r\ninterface IModal {\r\n  title?: string;\r\n  children: JSX.Element | null;\r\n  closeModal: () => void;\r\n  isModalOpened: boolean;\r\n}\r\n\r\nfunction Modal({ title, children, closeModal, isModalOpened }: IModal): JSX.Element | null {\r\n  const closeModalEsc = React.useCallback((e) => {\r\n    if (e.keyCode === keyCodeEsc) {\r\n      closeModal();\r\n    }\r\n  }, [closeModal]);\r\n\r\n  React.useEffect(() => {\r\n    document.addEventListener('keydown', closeModalEsc);\r\n\r\n    return (()=> {\r\n      document.removeEventListener('keydown', closeModalEsc);\r\n    })\r\n  }, [closeModalEsc])\r\n\r\n  return modalRoot ? ReactDOM.createPortal(\r\n    (\r\n      <>\r\n        <div className={`${styles.popup} ${isModalOpened ? styles.popupOpened : ''}`}>\r\n          <div className={`${styles.titleWrap} mt-10 ml-10 mr-10`}>\r\n            <h2 className=\"text text_type_main-large\">{title}</h2>\r\n            <CloseIcon type=\"primary\" onClick={closeModal}/>\r\n          </div>\r\n          {children}\r\n        </div>\r\n        <ModalOverlay isModalOpened={isModalOpened} closeModalOrder={closeModal}/>\r\n      </>\r\n    ), modalRoot)\r\n    : null;\r\n}\r\n\r\nexport default Modal;","import React from \"react\";\r\nimport styles from \"./CustomInput.module.css\";\r\n\r\ninterface ICustomInput {\r\n  placeholder: string;\r\n  type: string;\r\n  isRequired: boolean;\r\n  value: string;\r\n  handleChange: (e: React.ChangeEvent<HTMLInputElement>) => void;\r\n  isCustom?: boolean;\r\n}\r\n\r\nfunction CustomInput(props: ICustomInput): JSX.Element | null {\r\n  const { placeholder, type, value, handleChange, isRequired, isCustom }: ICustomInput = props;\r\n  const [typeInput, setTypeInput] = React.useState<string>(type);\r\n  const onEyeClick = (): void => {\r\n    if (typeInput === \"password\") {\r\n      setTypeInput(\"show-password\");\r\n    } else {\r\n      setTypeInput(\"password\");\r\n    }\r\n  };\r\n\r\n  const renderCustomInput = (): JSX.Element => !isCustom ? (\r\n    <>\r\n      <label className={styles.input_label}>{value ? \"\" : placeholder}</label>\r\n      <input\r\n        type={typeInput}\r\n        value={value || \"\"}\r\n        onChange={handleChange}\r\n        required={isRequired}\r\n        className={styles.input}\r\n      />\r\n      {((typeInput === \"password\" && value) ||\r\n        (typeInput === \"show-password\" && value)) && (\r\n        <div className={styles.input_eye} onClick={onEyeClick}></div>\r\n      )}\r\n    </>\r\n  ) : (\r\n    <>\r\n      <label className={styles.input_profile_label}>{placeholder}</label>\r\n      <input\r\n        type={typeInput}\r\n        value={value || \"\"}\r\n        onChange={handleChange}\r\n        required={isRequired}\r\n        className={`${styles.input} ${styles.input_profile}`}\r\n      />\r\n\r\n      {(typeInput === \"password\" && value) ||\r\n      (typeInput === \"show-password\" && value) ? (\r\n        <div className={styles.input_eye} onClick={onEyeClick}></div>\r\n      ) : (\r\n        <div className={styles.input_pencil}></div>\r\n      )}\r\n    </>\r\n  );\r\n\r\n  return <section className={styles.input_container}>{renderCustomInput()}</section>;\r\n}\r\n\r\nexport default CustomInput;","export function setCookie(name: string, value: string | number | boolean, props?: {expires?: Date | string | number, path?: string}): void {\r\n  props = props || {};\r\n  let exp = props.expires;\r\n  if (typeof exp == \"number\" && exp) {\r\n    const d = new Date();\r\n    d.setTime(d.getTime() + exp * 1000);\r\n    exp = props.expires = d;\r\n  }\r\n  if (exp && (exp as Date).toUTCString) {\r\n    props.expires = (exp as Date).toUTCString();\r\n  }\r\n  value = encodeURIComponent(value);\r\n  let updatedCookie = name + \"=\" + value;\r\n  for (const propName in props) {\r\n    updatedCookie += \";  path=/; \" + propName;\r\n    const propValue = props[propName];\r\n    if (propValue !== true) {\r\n      updatedCookie += \"=\" + propValue;\r\n    }\r\n  }\r\n  document.cookie = updatedCookie;\r\n}","// Auth \r\n\r\nimport { authApi } from \".\";\r\nimport { setCookie } from \"../../utils/cookie\";\r\nimport { Dispatch } from \"../store\";\r\nimport { showError } from \"./modalActions\";\r\n\r\n// Register\r\nexport const CREATE_USER_REQUEST: \"CREATE_USER_REQUEST\" = \"CREATE_USER_REQUEST\";\r\nexport const CREATE_USER_SUCCESS: \"CREATE_USER_SUCCESS\" = \"CREATE_USER_SUCCESS\";\r\nexport const CREATE_USER_FAILED: \"CREATE_USER_FAILED\" = \"CREATE_USER_FAILED\";\r\n\r\nexport function createUser({ email, password, name }) {\r\n  return (dispatch: Dispatch) => {\r\n    dispatch({\r\n      type: CREATE_USER_REQUEST,\r\n    });\r\n    authApi\r\n      .registerUser(email, password, name)\r\n      .then((res) => {\r\n        if (res.accessToken && res.refreshToken) {\r\n          setCookie(\"token\", res.accessToken.split(\"Bearer \")[1]);\r\n          localStorage.setItem(\"refreshToken\", res.refreshToken);\r\n          localStorage.setItem(\"userName\", res.user.name);\r\n        }\r\n        dispatch({\r\n          type: CREATE_USER_SUCCESS,\r\n          payload: res,\r\n        });\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n        dispatch(showError(error));\r\n        dispatch({\r\n          type: CREATE_USER_FAILED,\r\n        });\r\n      });\r\n  };\r\n}\r\n\r\n// Login\r\nexport const LOGIN_USER_REQUEST: \"LOGIN_USER_REQUEST\" = \"LOGIN_USER_REQUEST\";\r\nexport const LOGIN_USER_SUCCESS: \"LOGIN_USER_SUCCESS\" = \"LOGIN_USER_SUCCESS\";\r\nexport const LOGIN_USER_FAILED: \"LOGIN_USER_FAILED\" = \"LOGIN_USER_FAILED\";\r\n\r\nexport function loginUser({ email, password }) {\r\n  return (dispatch: Dispatch) => {\r\n    dispatch({\r\n      type: LOGIN_USER_REQUEST,\r\n    });\r\n    authApi\r\n      .loginUser(email, password)\r\n      .then((res) => {\r\n        if (res.accessToken && res.refreshToken) {\r\n          setCookie(\"token\", res.accessToken.split(\"Bearer \")[1]);\r\n          localStorage.setItem(\"refreshToken\", res.refreshToken);\r\n          localStorage.setItem(\"userName\", res.user.name);\r\n        }\r\n        dispatch({\r\n          type: LOGIN_USER_SUCCESS,\r\n          payload: res,\r\n        });\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n        dispatch(showError(error));\r\n        dispatch({\r\n          type: LOGIN_USER_FAILED,\r\n        });\r\n      });\r\n  };\r\n}\r\n\r\n// Forget/Reset Pass\r\nexport const FORGET_PASSWORD_CODE: \"FORGET_PASSWORD_CODE\" = \"FORGET_PASSWORD_CODE\";\r\nexport const RESET_USER_PASSWORD: \"RESET_USER_PASSWORD\" = \"RESET_USER_PASSWORD\";\r\n\r\nexport function forgetUserPassword(email) {\r\n  return (dispatch: Dispatch) => {\r\n    authApi\r\n      .forgetPassword(email)\r\n      .then((res) => {\r\n        dispatch({\r\n          type: FORGET_PASSWORD_CODE,\r\n          payload: res,\r\n        });\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n        dispatch(showError(error));\r\n      });\r\n  };\r\n}\r\n\r\nexport function resetUserPassword(password, code) {\r\n  return (dispatch: Dispatch) => {\r\n    authApi\r\n      .resetPassword(password, code)\r\n      .then((res) => {\r\n        dispatch({\r\n          type: RESET_USER_PASSWORD,\r\n          payload: res,\r\n        });\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n        dispatch(showError(error));\r\n      });\r\n  };\r\n}\r\n\r\n// Logout\r\nexport const LOGOUT_USER_INFO: \"LOGOUT_USER_INFO\" = \"LOGOUT_USER_INFO\";\r\n\r\nexport function logout(refreshToken) {\r\n  return (dispatch: Dispatch) => {\r\n    authApi\r\n      .logout(refreshToken)\r\n      .then((res) => {\r\n        dispatch({\r\n          type: LOGOUT_USER_INFO,\r\n          payload: res,\r\n        });\r\n        setCookie(\"token\", '');\r\n        localStorage.removeItem(\"refreshToken\");\r\n        localStorage.removeItem(\"userName\");\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n        dispatch(showError(error));\r\n      });\r\n  };\r\n}\r\n\r\n\r\n// Refresh user TOKEN\r\nexport const REFRESH_USER_TOKEN: \"REFRESH_USER_TOKEN\" = \"REFRESH_USER_TOKEN\";\r\n\r\nexport function refreshToken(afterRefresh) {\r\n  return (dispatch: Dispatch) => {\r\n    authApi\r\n      .refreshToken(localStorage.getItem(\"refreshToken\"))\r\n      .then((res) => {\r\n        if (res.accessToken && res.refreshToken) {\r\n          setCookie(\"token\", res.accessToken.split(\"Bearer \")[1]);\r\n          localStorage.setItem(\"refreshToken\", res.refreshToken);\r\n        }\r\n        dispatch({\r\n          type: REFRESH_USER_TOKEN,\r\n          payload: res,\r\n        });\r\n        if (afterRefresh) dispatch(afterRefresh);\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n        dispatch(showError(error));\r\n      });\r\n  };\r\n}\r\n","import React, { FormEvent } from \"react\";\r\nimport CustomInput from \"../../components/CustomInput/CustomInput\";\r\nimport styles from \"../common.module.css\";\r\nimport { Button } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { Link, Redirect } from \"react-router-dom\";\r\nimport { emailRegxep } from \"../../utils/constants\";\r\nimport { createUser } from \"../../services/actions/authActions\";\r\nimport { useAppDispatch, useAppSelector } from \"../../utils/hooks\";\r\n\r\n\r\nfunction RegisterPage(): JSX.Element | null {\r\n  const dispatch = useAppDispatch();\r\n  const { success } = useAppSelector((store) => ({\r\n    success: store.authInfoUser.success,\r\n  }));\r\n  const [name, setName] = React.useState<string>(\"\");\r\n  const [email, setEmail] = React.useState<string>(\"\");\r\n  const [password, setPassword] = React.useState<string>(\"\");\r\n  const [error, setError] = React.useState<string>(\"\");\r\n  const isValidityMail = email ? email.match(emailRegxep) : \"null\";\r\n  const isToken = localStorage.getItem(\"refreshToken\");\r\n\r\n  const onRegister = (evt: FormEvent): void => {\r\n    evt.preventDefault();\r\n    if (!email || !password || !name) {\r\n      setError(\"    !\");\r\n      setTimeout(() => setError(\"\"), 3000);\r\n      return;\r\n    }\r\n    if (isValidityMail === null) {\r\n      setError(\"  \");\r\n      setTimeout(() => setError(\"\"), 3000);\r\n      return;\r\n    }\r\n    dispatch(createUser({ name, email, password }));\r\n    setName(\"\");\r\n    setEmail(\"\");\r\n    setPassword(\"\");\r\n  };\r\n\r\n  const changeName = (evt: React.ChangeEvent<HTMLInputElement>): void => {\r\n    setName(evt.target.value);\r\n  };\r\n\r\n  const changeEmail = (evt: React.ChangeEvent<HTMLInputElement>): void => {\r\n    setEmail(evt.target.value);\r\n  };\r\n\r\n  const changePassword = (evt: React.ChangeEvent<HTMLInputElement>): void => {\r\n    setPassword(evt.target.value);\r\n  };\r\n\r\n  if (isToken) {\r\n    return (\r\n      <Redirect\r\n        to={{\r\n          pathname: \"/\",\r\n        }}\r\n      />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <form className={styles.form_container} onSubmit={onRegister} noValidate>\r\n      <h2 className={styles.form_title}></h2>\r\n      <span className={styles.form_error}>{error}</span>\r\n      <span className={styles.form_message}>\r\n        {success ? \"   \" : \"\"}\r\n      </span>\r\n\r\n      <CustomInput\r\n        type=\"text\"\r\n        isRequired\r\n        placeholder=\"\"\r\n        value={name}\r\n        handleChange={changeName}\r\n      />\r\n      <CustomInput\r\n        type=\"email\"\r\n        isRequired\r\n        placeholder=\"E-mail\"\r\n        value={email}\r\n        handleChange={changeEmail}\r\n      />\r\n      <CustomInput\r\n        type=\"password\"\r\n        isRequired\r\n        placeholder=\"\"\r\n        value={password}\r\n        handleChange={changePassword}\r\n      />\r\n      <div className={styles.form_button}>\r\n        <Button type=\"primary\" size=\"large\">\r\n          {\" \"}\r\n          {\" \"}\r\n        </Button>\r\n      </div>\r\n      <p className={styles.form_paragraph}>\r\n         ? <Link to=\"/login\"></Link>\r\n      </p>\r\n    </form>\r\n  );\r\n}\r\n\r\nexport default RegisterPage;","import React, { FormEvent } from \"react\";\r\nimport CustomInput from \"../../components/CustomInput/CustomInput\";\r\nimport styles from \"../common.module.css\";\r\nimport { Button } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { Link, Redirect, useLocation } from \"react-router-dom\";\r\nimport { emailRegxep } from \"../../utils/constants\";\r\nimport { loginUser } from \"../../services/actions/authActions\";\r\nimport { useAppDispatch, useAppSelector } from \"../../utils/hooks\";\r\n\r\n\r\nfunction LoginPage(): JSX.Element | null {\r\n  const location = useLocation();\r\n  const { success, userName } = useAppSelector((store) => ({\r\n    success: store.authInfoUser.success,\r\n    userName: store.authInfoUser.user.name,\r\n  }));\r\n  const dispatch = useAppDispatch();\r\n  const [email, setEmail] = React.useState<string>(\"\");\r\n  const [password, setPassword] = React.useState<string>(\"\");\r\n  const [error, setError] = React.useState<string>(\"\");\r\n  const isValidityMail = email ? email.match(emailRegxep) : \"null\";\r\n  const isToken = localStorage.getItem(\"refreshToken\");\r\n\r\n  const onLogin = (evt: FormEvent): void => {\r\n    evt.preventDefault();\r\n    if (!email || !password) {\r\n      setError(\"  !\");\r\n      setTimeout(() => setError(\"\"), 3000);\r\n      return;\r\n    }\r\n    if (isValidityMail === null) {\r\n      setError(\"  \");\r\n      setTimeout(() => setError(\"\"), 3000);\r\n      return; \r\n    }\r\n    dispatch(loginUser({ email, password }));\r\n    setEmail(\"\");\r\n    setPassword(\"\");\r\n  };\r\n\r\n  const changeEmail = (evt: React.ChangeEvent<HTMLInputElement>): void => {\r\n    setEmail(evt.target.value);\r\n  };\r\n\r\n  const changePassword = (evt: React.ChangeEvent<HTMLInputElement>): void => {\r\n    setPassword(evt.target.value);\r\n  };\r\n\r\n  if (isToken) {\r\n    return (\r\n      <Redirect to={location.state ? location.state.from.pathname : \"/\"} />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <form className={styles.form_container} onSubmit={onLogin} noValidate>\r\n      <h2 className={styles.form_title}></h2>\r\n      <span className={styles.form_error}>{error}</span>\r\n      <span className={styles.form_message}>\r\n        {success && userName ? ` ` : \"\"}\r\n      </span>\r\n      <CustomInput\r\n        type=\"email\"\r\n        isRequired\r\n        placeholder=\"E-mail\"\r\n        value={email}\r\n        handleChange={changeEmail}\r\n      />\r\n      <CustomInput\r\n        type=\"password\"\r\n        isRequired\r\n        placeholder=\"\"\r\n        value={password}\r\n        handleChange={changePassword}\r\n      />\r\n      <div className={styles.form_button}>\r\n        <Button type=\"primary\" size=\"large\">\r\n          \r\n        </Button>\r\n      </div>\r\n      <p className={styles.form_paragraph}>\r\n         &mdash;  ?{\" \"}\r\n        <Link to=\"/registration\"></Link>\r\n      </p>\r\n      <p className={styles.form_paragraph}>\r\n         ? <Link to=\"/forgot-password\"> </Link>\r\n      </p>\r\n    </form>\r\n  );\r\n}\r\n\r\nexport default LoginPage;","import React, { FormEvent } from \"react\";\r\nimport CustomInput from \"../../components/CustomInput/CustomInput\";\r\nimport styles from \"../common.module.css\";\r\nimport { Button } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { Link, Redirect, useLocation } from \"react-router-dom\";\r\nimport { emailRegxep } from \"../../utils/constants\";\r\nimport { forgetUserPassword } from \"../../services/actions/authActions\";\r\nimport { useAppDispatch, useAppSelector } from \"../../utils/hooks\";\r\n\r\n\r\nfunction ForgetPassPage(): JSX.Element | null {\r\n  const location = useLocation();\r\n  const { message, success } = useAppSelector((store) => ({\r\n    message: store.authInfoUser.message,\r\n    success: store.authInfoUser.success,\r\n  }));\r\n  const dispatch = useAppDispatch();\r\n  const [email, setEmail] = React.useState<string>(\"\");\r\n  const [error, setError] = React.useState<string>(\"\");\r\n  const isMailValid = email ? email.match(emailRegxep) : \"null\";\r\n  const isToken = localStorage.getItem(\"refreshToken\");\r\n  const onSubmit = (evt: FormEvent) => {\r\n    evt.preventDefault();\r\n    if (!email) {\r\n      setError(\" Email   \");\r\n      setTimeout(() => setError(\"\"), 3000);\r\n      return;\r\n    }\r\n    if (isMailValid === null) {\r\n      setError(\" email \");\r\n      setTimeout(() => setError(\"\"), 3000);\r\n      return;\r\n    }\r\n    dispatch(forgetUserPassword(email));\r\n    setEmail(\"\");\r\n  };\r\n\r\n  const changeEmail = (evt: React.ChangeEvent<HTMLInputElement>) => {\r\n    setEmail(evt.target.value);\r\n  };\r\n\r\n  if (success && message === \"Reset email sent\") {\r\n    return (\r\n      <Redirect\r\n        to={{\r\n          pathname: \"/reset-password\",\r\n          state: { from: location },\r\n        }}\r\n      />\r\n    );\r\n  }\r\n\r\n  if (isToken) {\r\n    return (\r\n      <Redirect\r\n        to={{\r\n          pathname: \"/\",\r\n        }}\r\n      />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <form className={styles.form_container} onSubmit={onSubmit} noValidate>\r\n      <h2 className={styles.form_title}> </h2>\r\n      <span className={styles.form_error}>{error}</span>\r\n      <CustomInput\r\n        type=\"email\"\r\n        isRequired\r\n        placeholder=\" e-mail\"\r\n        value={email}\r\n        handleChange={changeEmail}\r\n      />\r\n      <div className={styles.form_button}>\r\n        <Button type=\"primary\" size=\"large\">\r\n          \r\n        </Button>\r\n      </div>\r\n      <p className={styles.form_paragraph}>\r\n         ? <Link to=\"/login\"></Link>\r\n      </p>\r\n    </form>\r\n  );\r\n}\r\n\r\nexport default ForgetPassPage;","import React, { FormEvent } from \"react\";\r\nimport CustomInput from \"../../components/CustomInput/CustomInput\";\r\nimport styles from \"../common.module.css\"\r\nimport { Button } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { Link, useHistory, Redirect, useLocation } from \"react-router-dom\";\r\nimport { resetUserPassword } from \"../../services/actions/authActions\";\r\nimport { useAppDispatch, useAppSelector } from \"../../utils/hooks\";\r\n\r\nfunction ResetPassPage(): JSX.Element | null {\r\n  const location = useLocation();\r\n  const history = useHistory();\r\n  const { message, success } = useAppSelector((store) => ({\r\n    message: store.authInfoUser.message,\r\n    success: store.authInfoUser.success,\r\n  }));\r\n  const dispatch = useAppDispatch();\r\n  const [code, setCode] = React.useState<string>(\"\");\r\n  const [password, setPassword] = React.useState<string>(\"\");\r\n  const [error, setError] = React.useState<string>(\"\");\r\n  const isToken = localStorage.getItem(\"refreshToken\");\r\n  const onSubmit = (evt: FormEvent): void => {\r\n    evt.preventDefault();\r\n    if (!code || !password) {\r\n      setError(\"   \");\r\n      setTimeout(() => setError(\"\"), 3000);\r\n      return;\r\n    }\r\n    dispatch(resetUserPassword(password, code));\r\n    setPassword(\"\");\r\n    setCode(\"\");\r\n  };\r\n\r\n  const changeCode = (evt: React.ChangeEvent<HTMLInputElement>): void => {\r\n    setCode(evt.target.value);\r\n  };\r\n  const changePassword = (evt: React.ChangeEvent<HTMLInputElement>): void => {\r\n    setPassword(evt.target.value);\r\n  };\r\n\r\n  if (isToken) {\r\n    return (\r\n      <Redirect\r\n        to={{\r\n          pathname: \"/\",\r\n        }}\r\n      />\r\n    );\r\n  }\r\n  if (success && message === \"Password successfully reset\") {\r\n    history.push(\"/login\");\r\n  }\r\n\r\n  if (!location.state) {\r\n    history.push(\"/\");\r\n  }\r\n\r\n  return (\r\n    <form className={styles.form_container} onSubmit={onSubmit} noValidate>\r\n      <h2 className={styles.form_title}> </h2>\r\n      <span className={styles.form_error}>{error}</span>\r\n      <CustomInput\r\n        type=\"password\"\r\n        isRequired\r\n        placeholder=\"  \"\r\n        value={password}\r\n        handleChange={changePassword}\r\n      />\r\n      <CustomInput\r\n        type=\"text\"\r\n        isRequired\r\n        placeholder=\"   \"\r\n        value={code}\r\n        handleChange={changeCode}\r\n      />\r\n      <div className={styles.form_button}>\r\n        <Button type=\"primary\" size=\"large\">\r\n          \r\n        </Button>\r\n      </div>\r\n      <p className={styles.form_paragraph}>\r\n         ? <Link to=\"/login\"></Link>\r\n      </p>\r\n    </form>\r\n  );\r\n}\r\n\r\nexport default ResetPassPage;","import React from \"react\";\r\nimport styles from \"../../pages/profile/profile.module.css\";\r\nimport { Link, useLocation, useHistory } from \"react-router-dom\";\r\nimport { logout } from \"../../services/actions/authActions\";\r\nimport { useAppDispatch } from \"../../utils/hooks\";\r\n\r\nfunction ProfileMenu(): JSX.Element | null {\r\n  const refreshToken = localStorage.getItem(\"refreshToken\");\r\n  const dispatch = useAppDispatch();\r\n  const history = useHistory();\r\n  let location = useLocation();\r\n  \r\n  const handleLogout = (): void => {\r\n    dispatch(logout(refreshToken));\r\n    localStorage.removeItem(\"refreshToken\");\r\n    localStorage.removeItem(\"userName\");\r\n    history.push(\"/login\");\r\n  };\r\n\r\n  return (\r\n    <div className={styles.profile_menu}>\r\n      <ul className={styles.profile_menu_list}>\r\n        <Link to=\"/profile\">\r\n          <li\r\n            className={`${styles.profile_menu_item} ${\r\n              location.pathname === \"/profile\" &&\r\n              styles.profile_menu_item_active\r\n            }`}\r\n          >\r\n            \r\n          </li>\r\n        </Link>\r\n        <Link to=\"/profile/orders\">\r\n          <li\r\n            className={`${styles.profile_menu_item} ${\r\n              location.pathname === \"/profile/orders\" &&\r\n              styles.profile_menu_item_active\r\n            }`}\r\n          >\r\n             \r\n          </li>\r\n        </Link>\r\n        <li className={styles.profile_menu_item} onClick={handleLogout}>\r\n          \r\n        </li>\r\n      </ul>\r\n      <p className={styles.profile_info}>\r\n                \r\n      </p>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ProfileMenu;","import { authApi } from \".\";\r\nimport { Dispatch } from \"../store\";\r\nimport { refreshToken } from \"./authActions\";\r\n\r\n// Get info User\r\nexport const GET_USER_INFO_REQUEST: \"GET_USER_INFO_REQUEST\" = \"GET_USER_INFO_REQUEST\";\r\nexport const GET_USER_INFO_SUCCESS: \"GET_USER_INFO\" = \"GET_USER_INFO\";\r\nexport const GET_USER_INFO_FAILED: \"GET_USER_INFO_FAILED\" = \"GET_USER_INFO_FAILED\";\r\n\r\nexport function getUserInfo() {\r\n  return (dispatch: Dispatch) => {\r\n    dispatch({\r\n      type: GET_USER_INFO_REQUEST,\r\n    });\r\n    authApi\r\n      .getUserInfo()\r\n      .then((res) => {\r\n        if (!res.success) {\r\n          throw res;\r\n        }\r\n        dispatch({\r\n          type: GET_USER_INFO_SUCCESS,\r\n          payload: res,\r\n        });\r\n      })\r\n      .catch((error) => {\r\n        if (error.status === 403) {\r\n          dispatch(refreshToken(getUserInfo()));\r\n          console.log(error);\r\n        }\r\n        if (error.message === \"jwt expired\" || error.message === \"jwt malformed\") {\r\n          dispatch(refreshToken(getUserInfo()));\r\n          console.log(error);\r\n        }\r\n        dispatch({\r\n          type: GET_USER_INFO_FAILED,\r\n        });\r\n      });\r\n  };\r\n}\r\n\r\n// Udate info User\r\nexport const UPDATE_USER_INFO_REQUEST: \"UPDATE_USER_INFO_REQUEST\" = \"UPDATE_USER_INFO_REQUEST\";\r\nexport const UPDATE_USER_INFO_SUCCESS: \"UPDATE_USER_INFO_SUCCESS\" = \"UPDATE_USER_INFO_SUCCESS\";\r\nexport const UPDATE_USER_INFO_FAILED: \"UPDATE_USER_INFO_FAILED\" = \"UPDATE_USER_INFO_FAILED\";\r\n\r\nexport function updateUserInfo(name, email, password) {\r\n  return (dispatch: Dispatch) => {\r\n    dispatch({\r\n      type: UPDATE_USER_INFO_REQUEST,\r\n    });\r\n    authApi\r\n      .updateUserInfo(name, email, password)\r\n      .then((res) => {\r\n        if (!res.success) {\r\n          throw res;\r\n        }\r\n        dispatch({\r\n          type: UPDATE_USER_INFO_SUCCESS,\r\n          payload: res,\r\n        });\r\n        localStorage.setItem(\"userName\", res.user.name);\r\n      })\r\n      .catch((error) => {\r\n        if (error.status === 403) {\r\n          dispatch(refreshToken(getUserInfo()));\r\n          console.log(error);\r\n        }\r\n        if (error.message === \"jwt expired\") {\r\n          dispatch(refreshToken(updateUserInfo(name, email, password)));\r\n          console.log(error);\r\n          dispatch({\r\n            type: UPDATE_USER_INFO_FAILED,\r\n          });\r\n        }\r\n      });\r\n  };\r\n}\r\n","import React, { FormEvent } from \"react\";\r\nimport styles from \"./profile.module.css\";\r\nimport CustomInput from \"../../components/CustomInput/CustomInput\";\r\nimport ProfileMenu from \"../../components/ProfileMenu/ProfileMenu\";\r\nimport { Button } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { updateUserInfo, getUserInfo } from \"../../services/actions/userActions\";\r\nimport { useAppDispatch, useAppSelector } from \"../../utils/hooks\";\r\n\r\n\r\nfunction Profile(): JSX.Element | null {\r\n  const { userName, userEmail } = useAppSelector((store) => ({\r\n    userName: store.authInfoUser.user.name,\r\n    userEmail: store.authInfoUser.user.email,\r\n  }));\r\n  const [name, setName] = React.useState<string>(\"\");\r\n  const [email, setEmail] = React.useState<string>(\"\");\r\n  const [password, setPassword] = React.useState<string>(\"\");\r\n  const dispatch = useAppDispatch();\r\n\r\n  const changeName = (evt: React.ChangeEvent<HTMLInputElement>): void => {\r\n    setName(evt.target.value);\r\n  };\r\n  const changeEmail = (evt: React.ChangeEvent<HTMLInputElement>): void => {\r\n    setEmail(evt.target.value);\r\n  };\r\n  const changePassword = (evt: React.ChangeEvent<HTMLInputElement>): void => {\r\n    setPassword(evt.target.value);\r\n  };\r\n\r\n  const onSaveNewUserData = (evt: FormEvent): void => {\r\n    evt.preventDefault();\r\n    dispatch(updateUserInfo(name, email, password));\r\n  };\r\n  const handleCancel = (): void => {\r\n    setName(userName);\r\n    setEmail(userEmail); \r\n  };\r\n\r\n  React.useEffect(() => {\r\n    dispatch(getUserInfo());\r\n  }, [dispatch]);\r\n\r\n  React.useEffect(() => {\r\n    setName(userName);\r\n    setEmail(userEmail);\r\n  }, [userName, userEmail]);\r\n\r\n  return (\r\n    <section className={styles.profile_container} onSubmit={onSaveNewUserData}>\r\n      <ProfileMenu />\r\n      <form className={styles.profile_data} noValidate>\r\n        <CustomInput\r\n          type=\"text\"\r\n          isRequired\r\n          placeholder=\"\"\r\n          value={name}\r\n          handleChange={changeName}\r\n          isCustom\r\n        />\r\n        <CustomInput\r\n          type=\"email\"\r\n          isRequired\r\n          placeholder=\"E-mail\"\r\n          value={email}\r\n          handleChange={changeEmail}\r\n          isCustom\r\n        />\r\n        <CustomInput\r\n          type=\"password\"\r\n          isRequired\r\n          placeholder=\"\"\r\n          value={password}\r\n          handleChange={changePassword}\r\n          isCustom\r\n        />\r\n        <div className={styles.profile_button_container}>\r\n          <div className={styles.profile_button}>\r\n            <Button type=\"primary\" size=\"large\">\r\n              \r\n            </Button>\r\n          </div>\r\n          <div className={styles.profile_button} >\r\n            <button className={styles.profile_button_reset} type=\"reset\" onClick={handleCancel}></button>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default Profile;","import React from \"react\";\r\nimport styles from \"./Order.module.css\";\r\nimport { CurrencyIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { updateDate } from \"../../utils/helpers\";\r\nimport { optionsDate } from \"../../utils/constants\";\r\nimport { getSelectedOrder } from \"../../services/actions/orderActions\";\r\nimport { useAppDispatch, useAppSelector } from \"../../utils/hooks\";\r\n\r\ninterface IItem {\r\n  image: string;\r\n  image_mobile: string;\r\n  name: string;\r\n  price: number;\r\n  _id: string;\r\n  count: number;\r\n};\r\n\r\ninterface IOrderProps {\r\n  order?: any;\r\n  date?: number;\r\n  number?: number;\r\n  name?: string;\r\n  status?: string;\r\n  price?: number;\r\n};\r\n\r\nfunction Order(props: IOrderProps) {\r\n  const dispatch = useAppDispatch();\r\n  const { ingredients } = useAppSelector((store) => ({\r\n    ingredients: store.burgerIngredients.ingredients,\r\n  }));\r\n  const handleClick = () => {\r\n    dispatch(getSelectedOrder(props.order));\r\n  };\r\n  const orderIngredientsId = props.order.ingredients;\r\n  const orderIngredients = orderIngredientsId.map((id: string) =>\r\n    ingredients.find((item: IItem) => item._id === id)\r\n  );\r\n\r\n  const orderPrice = orderIngredients.reduce(function (\r\n    prevValue: number,\r\n    item: any\r\n  ) {\r\n    return prevValue + item.price;\r\n  },\r\n  0);\r\n  const orderDate = updateDate(props.order.createdAt, optionsDate);\r\n\r\n  return orderIngredients && (\r\n    <section className={styles.order} onClick={handleClick}>\r\n      <div className={styles.order_header}>\r\n        <p className={styles.order_number}>#{props.order.number}</p>\r\n        <p className={styles.order_date}>{orderDate}</p>\r\n      </div>\r\n      <p className={styles.order_name}>{props.order.name}</p>\r\n      <p\r\n        className={`${styles.order_status} ${\r\n          props.order.status === \"done\" && styles.order_status_finished\r\n        } ${props.order.status === \"pending\" && styles.order_status_cancelled}`}\r\n      >\r\n        {props.order.status === \"done\" ? \"\" : \"\"}\r\n      </p>\r\n      <div className={styles.order_ingredients}>\r\n        <div className={styles.order_img_container}>\r\n          {orderIngredients.map((item: IItem, index: number) => {\r\n            return (\r\n              <img\r\n                className={`${styles.order_img}`}\r\n                src={item.image_mobile}\r\n                alt={item.name}\r\n                key={index}\r\n                style={{ zIndex: Math.abs(index - 100) }}\r\n              />\r\n            );\r\n          })}\r\n        </div>\r\n        <div className={styles.order_price_container}>\r\n          <p className={styles.order_price}>{orderPrice}</p>\r\n          <CurrencyIcon type=\"primary\" />\r\n        </div>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default Order;","import { SHOW_ERROR, HIDE_ERROR } from \"../actions/modalActions\";\r\nimport { TInitialStateError } from \"./types\";\r\n\r\nexport const initialStateError: TInitialStateError = {\r\n  error: {},\r\n};\r\n\r\nexport const errorsReducer = (state = initialStateError, action): TInitialStateError => {\r\n  switch (action.type) {\r\n    case SHOW_ERROR: {\r\n      return {\r\n        ...state,\r\n        error: action.payload,\r\n      };\r\n    }\r\n    case HIDE_ERROR: {\r\n      return {\r\n        ...state,\r\n        error: {},\r\n      };\r\n    }\r\n    default: {\r\n      return {\r\n        ...state,\r\n      };\r\n    }\r\n  }\r\n};","import { GET_INGREDIENTS_REQUEST, GET_INGREDIENTS_SUCCESS, GET_INGREDIENTS_FAILED } from \"../actions/burgerActions\";\r\nimport { TInitialStateIngredients } from \"./types\";\r\n\r\nexport const initialStateIngredients: TInitialStateIngredients = {\r\n  ingredients: [],\r\n  ingredientsRequest: false,\r\n  ingredientsFailed: false,\r\n  isLoading: false,\r\n};\r\n\r\nexport const getIngredientsListReducer = (state = initialStateIngredients, action): TInitialStateIngredients => {\r\n  switch (action.type) {\r\n    case GET_INGREDIENTS_REQUEST: {\r\n      return {\r\n        ...state,\r\n        ingredientsRequest: true,\r\n      };\r\n    }\r\n    case GET_INGREDIENTS_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        ingredientsFailed: false,\r\n        ingredients: action.payload,\r\n        ingredientsRequest: false,\r\n        isLoading: true,\r\n      };\r\n    }\r\n    case GET_INGREDIENTS_FAILED: {\r\n      return {\r\n        ...state,\r\n        ingredientsFailed: true,\r\n        ingredientsRequest: false,\r\n        isLoading: false,\r\n      };\r\n    }\r\n\r\n    default: {\r\n      return {\r\n        ...state,\r\n      };\r\n    }\r\n  }\r\n};","import { ADD_CONSTRUCTOR_INGREDIENT, DELETE_CONSTRUCTOR_INGREDIENT, MOVE_CONSTRUCTOR_INGREDIENT } from \"../actions/burgerActions\";\r\nimport { TInitialStateConstructor } from \"./types\";\r\nimport { v4 as uuidv4 } from 'uuid';\r\n\r\nexport const initialStateConstructor: TInitialStateConstructor = {\r\n  constructorIngredients: [],\r\n  isBuns: null,\r\n};\r\n\r\nexport const getConstructorIngredientsReducer = (state = initialStateConstructor, action): TInitialStateConstructor => {\r\n  switch (action.type) {\r\n    case ADD_CONSTRUCTOR_INGREDIENT: {\r\n      if (action.payload.type === \"bun\") {\r\n        return {\r\n          ...state,\r\n          isBuns: action.payload,\r\n        };\r\n      }\r\n      return {\r\n        ...state,\r\n        constructorIngredients: [\r\n          ...state.constructorIngredients,\r\n          { ...action.payload, ingredientId: uuidv4() },\r\n        ],\r\n      };\r\n    }\r\n    case DELETE_CONSTRUCTOR_INGREDIENT: {\r\n      return {\r\n        ...state,\r\n        constructorIngredients: [\r\n          ...state.constructorIngredients.filter(\r\n            (item: any) => item.ingredientId !== action.payload\r\n          ),\r\n        ],\r\n      };\r\n    }\r\n    case MOVE_CONSTRUCTOR_INGREDIENT: {\r\n      const { dragIndex, hoverIndex } = action.payload;\r\n      const ingredients = [...state.constructorIngredients];\r\n      ingredients.splice(dragIndex, 0, ingredients.splice(hoverIndex, 1)[0]);\r\n      return {\r\n        ...state,\r\n        constructorIngredients: ingredients,\r\n      };\r\n    }\r\n    default: {\r\n      return {\r\n        ...state,\r\n      };\r\n    }\r\n  }\r\n};","import { GET_SELECTED_INGREDIENT_INFO, DELETE_SELECTED_INGREDIENT_INFO } from \"../actions/modalActions\";\r\nimport { TInitialStateIngredient } from \"./types\";\r\n\r\nexport const initialStateIngredient: TInitialStateIngredient = {\r\n  currentIngredient: null,\r\n};\r\n\r\nexport const getIngredientInfoReducer = (state = initialStateIngredient, action): TInitialStateIngredient => {\r\n  switch (action.type) {\r\n    case GET_SELECTED_INGREDIENT_INFO: {\r\n      return {\r\n        ...state,\r\n        currentIngredient: action.payload,\r\n      };\r\n    }\r\n    case DELETE_SELECTED_INGREDIENT_INFO: {\r\n      return {\r\n        ...state,\r\n        currentIngredient: null,\r\n      };\r\n    }\r\n    default: {\r\n      return {\r\n        ...state,\r\n      };\r\n    }\r\n  }\r\n};","import { SHOW_MODAL, HIDE_MODAL, SHOW_MODAL_ORDER, HIDE_MODAL_ORDER, SHOW_MODAL_ERROR, HIDE_MODAL_ERROR } from \"../actions/modalActions\";\r\nimport { TInitialStateModal } from \"./types\";\r\n\r\nexport const initialStateModal: TInitialStateModal = {\r\n  isModalOpened: false,\r\n  isModalOpenedOrder: false,\r\n  isModalOpenedError: false\r\n};\r\n\r\nexport const modalReducer = (state = initialStateModal, action): TInitialStateModal => {\r\n  switch (action.type) {\r\n    case SHOW_MODAL: {\r\n      return {\r\n        ...state,\r\n        isModalOpened: true,\r\n        isModalOpenedOrder: false,\r\n        isModalOpenedError: false,\r\n      };\r\n    }\r\n    case HIDE_MODAL: {\r\n      return {\r\n        ...state,\r\n        isModalOpened: false,\r\n        isModalOpenedOrder: false,\r\n        isModalOpenedError: false,\r\n      };\r\n    }\r\n    case SHOW_MODAL_ORDER: {\r\n      return {\r\n        ...state,\r\n        isModalOpenedOrder: true,\r\n        isModalOpened: false,\r\n        isModalOpenedError: false,\r\n      };\r\n    }\r\n    case HIDE_MODAL_ORDER: {\r\n      return {\r\n        ...state,\r\n        isModalOpenedOrder: false,\r\n        isModalOpened: false,\r\n        isModalOpenedError: false,\r\n      };\r\n    }\r\n    case SHOW_MODAL_ERROR: {\r\n      return {\r\n        ...state,\r\n        isModalOpenedOrder: false,\r\n        isModalOpened: false,\r\n        isModalOpenedError: true,\r\n      };\r\n    }\r\n    case HIDE_MODAL_ERROR: {\r\n      return {\r\n        ...state,\r\n        isModalOpenedOrder: false,\r\n        isModalOpened: false,\r\n        isModalOpenedError: false,\r\n      };\r\n    }\r\n    default: {\r\n      return {\r\n        ...state,\r\n      };\r\n    }\r\n  }\r\n};","import { GET_ORDER_REQUEST, GET_ORDER_SUCCESS, GET_ORDER_FAILED, DELETE_ORDER } from \"../actions/orderActions\";\r\nimport { TInitialStateOrder } from \"./types\";\r\n\r\nexport const initialStateOrder: TInitialStateOrder = {\r\n  order: null,\r\n  orderRequest: false,\r\n  orderFailed: false,\r\n};\r\n\r\nexport const getOrderReducer = (state = initialStateOrder, action): TInitialStateOrder => {\r\n  switch (action.type) {\r\n    case GET_ORDER_REQUEST: {\r\n      return {\r\n        ...state,\r\n        orderRequest: true,\r\n      };\r\n    }\r\n    case GET_ORDER_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        orderFailed: false,\r\n        order: action.payload,\r\n        orderRequest: false,\r\n      };\r\n    }\r\n    case GET_ORDER_FAILED: {\r\n      return {\r\n        ...state,\r\n        orderFailed: true,\r\n        orderRequest: false,\r\n      };\r\n    }\r\n    case DELETE_ORDER: {\r\n      return {\r\n        ...state,\r\n        orderFailed: false,\r\n        orderRequest: false,\r\n        order: null,\r\n      };\r\n    }\r\n\r\n    default: {\r\n      return {\r\n        ...state,\r\n      };\r\n    }\r\n  }\r\n};","import { CREATE_USER_REQUEST, CREATE_USER_SUCCESS, CREATE_USER_FAILED, LOGIN_USER_REQUEST, LOGIN_USER_SUCCESS, LOGIN_USER_FAILED, FORGET_PASSWORD_CODE, RESET_USER_PASSWORD, LOGOUT_USER_INFO, REFRESH_USER_TOKEN } from \"../actions/authActions\";\r\nimport { UPDATE_USER_INFO_REQUEST, UPDATE_USER_INFO_SUCCESS, UPDATE_USER_INFO_FAILED } from \"../actions/userActions\";\r\nimport { TInitialUserInfo } from \"./types\";\r\n\r\nexport const initialUserInfo: TInitialUserInfo = {\r\n  user: { email: \"\", password: \"\", name: \"\" },\r\n  success: false,\r\n  accessToken: null,\r\n  refreshToken: null,\r\n  message: null,\r\n  userRequest: false,\r\n  userRequestFail: false,\r\n};\r\n\r\nexport const userInfoReducer = (state = initialUserInfo, action): TInitialUserInfo => {\r\n  switch (action.type) {\r\n    case CREATE_USER_REQUEST: {\r\n      return {\r\n        ...state,\r\n        userRequest: true,\r\n      };\r\n    }\r\n    case CREATE_USER_SUCCESS: {\r\n      const { success, user, accessToken, refreshToken } = action.payload;\r\n      return {\r\n        ...state,\r\n        success: success,\r\n        user: user,\r\n        accessToken: accessToken,\r\n        refreshToken: refreshToken,\r\n        userRequest: false,\r\n        userRequestFail: false,\r\n      };\r\n    }\r\n    case CREATE_USER_FAILED: {\r\n      return {\r\n        ...state,\r\n        userRequest: false,\r\n        userRequestFail: true,\r\n      };\r\n    }\r\n    case LOGIN_USER_REQUEST: {\r\n      return {\r\n        ...state,\r\n        userRequest: true,\r\n      };\r\n    }\r\n    case LOGIN_USER_SUCCESS: {\r\n      const { success, user, accessToken, refreshToken } = action.payload;\r\n      return {\r\n        ...state,\r\n        success: success,\r\n        user: user,\r\n        accessToken: accessToken,\r\n        refreshToken: refreshToken,\r\n        userRequest: false,\r\n        userRequestFail: false,\r\n      };\r\n    }\r\n    case LOGIN_USER_FAILED: {\r\n      return {\r\n        ...state,\r\n        userRequest: false,\r\n        userRequestFail: true,\r\n      };\r\n    }\r\n    case FORGET_PASSWORD_CODE: {\r\n      const { success, message } = action.payload;\r\n      return {\r\n        ...state,\r\n        success: success,\r\n        message: message,\r\n      };\r\n    }\r\n    case RESET_USER_PASSWORD: {\r\n      const { success, message } = action.payload;\r\n      return {\r\n        ...state,\r\n        success: success,\r\n        message: message,\r\n      };\r\n    }\r\n    case LOGOUT_USER_INFO: {\r\n      const { success, message } = action.payload;\r\n      return {\r\n        ...state,\r\n        user: { email: \"\", password: \"\", name: \"\" },\r\n        success: success,\r\n        accessToken: null,\r\n        refreshToken: null,\r\n        message: message,\r\n        userRequest: false,\r\n        userRequestFail: false,\r\n      };\r\n    }\r\n\r\n    case UPDATE_USER_INFO_REQUEST: {\r\n      return {\r\n        ...state,\r\n        userRequest: true,\r\n      };\r\n    }\r\n    case UPDATE_USER_INFO_SUCCESS: {\r\n      const { success, user } = action.payload;\r\n      return {\r\n        ...state,\r\n        success: success,\r\n        user: user,\r\n        userRequest: false,\r\n        userRequestFail: false,\r\n      };\r\n    }\r\n    case UPDATE_USER_INFO_FAILED: {\r\n      return {\r\n        ...state,\r\n        userRequest: false,\r\n        userRequestFail: true,\r\n      };\r\n    }\r\n    case REFRESH_USER_TOKEN: {\r\n      const { success, accessToken, refreshToken } = action.payload;\r\n      return {\r\n        ...state,\r\n        success: success,\r\n        accessToken: accessToken,\r\n        refreshToken: refreshToken,\r\n        userRequest: false,\r\n        userRequestFail: false,\r\n      };\r\n    }\r\n    default: {\r\n      return {\r\n        ...state,\r\n      };\r\n    }\r\n  }\r\n}","// WebSockets\r\nexport const WS_CONNECTION_START: 'WS_CONNECTION_START' = 'WS_CONNECTION_START';\r\nexport const WS_CONNECTION_SUCCESS: 'WS_CONNECTION_SUCCESS' = 'WS_CONNECTION_SUCCESS';\r\nexport const WS_GET_ORDERS: 'WS_GET_ORDERS' = 'WS_GET_ORDERS';\r\nexport const WS_SEND_MESSAGE: 'WS_SEND_MESSAGE' = 'WS_SEND_MESSAGE';\r\nexport const WS_SEND_PONG: 'WS_SEND_PONG' = 'WS_SEND_PONG';\r\nexport const WS_CONNECTION_ERROR: 'WS_CONNECTION_ERROR' = 'WS_CONNECTION_ERROR';\r\nexport const WS_CONNECTION_CLOSED: 'WS_CONNECTION_CLOSED' = 'WS_CONNECTION_CLOSED';\r\nexport const WS_CONNECTION_END: 'WS_CONNECTION_END' = 'WS_CONNECTION_END';\r\n\r\nexport function wsConnectionSuccess() {\r\n  return {\r\n    type: WS_CONNECTION_SUCCESS,\r\n  };\r\n}\r\n\r\nexport function wsConnectionStart(url) {\r\n  return {\r\n    type: WS_CONNECTION_START,\r\n    payload: url,\r\n  };\r\n}\r\n\r\nexport function wsGetOrders(orders) {\r\n  return {\r\n    type: WS_GET_ORDERS,\r\n    payload: orders,\r\n  };\r\n}\r\n\r\nexport const wsSendMessage = (message) => {\r\n  return {\r\n    type: WS_SEND_MESSAGE,\r\n    payload: message,\r\n  };\r\n};\r\n\r\nexport const wsConnectionError = () => {\r\n  return {\r\n    type: WS_CONNECTION_ERROR,\r\n  };\r\n};\r\n\r\nexport const wsConnectionClosed = () => {\r\n  return {\r\n    type: WS_CONNECTION_CLOSED,\r\n  };\r\n};","import { Middleware } from \"redux\";\r\nimport { getCookie } from \"../utils/helpers\";\r\nimport { RootState, wsActions } from \"./store\";\r\n\r\n\r\nexport type WsActions = typeof wsActions;\r\n\r\nexport const socketMiddleware = (wsUrl: string, wsActions: WsActions): Middleware<{}, RootState> => {\r\n  return (store) => {\r\n    let socket: WebSocket | null = null;\r\n    return (next) => (action) => {\r\n      const { dispatch } = store;\r\n      const { type, payload } = action;\r\n      const {\r\n        wsStart,\r\n        wsSendMessage,\r\n        onOpen,\r\n        onClose,\r\n        onError,\r\n        onGetOrders,\r\n        wsClose,\r\n        wsPingPong,\r\n      } = wsActions;\r\n\r\n      if (type === wsStart) {\r\n        socket = new WebSocket(action.payload);\r\n\r\n        socket.onopen = (event) => {\r\n          dispatch({ type: onOpen, payload: event });\r\n        };\r\n\r\n        socket.onerror = (event) => {\r\n          dispatch({ type: onError, payload: event });\r\n        };\r\n\r\n        socket.onmessage = (event) => {\r\n          const { data } = event;\r\n          const parseData = JSON.parse(data);\r\n          dispatch({\r\n            type: onGetOrders,\r\n            payload: {\r\n              data: parseData,\r\n              timestamp: new Date().getTime() / 100,\r\n            },\r\n          });\r\n        };\r\n\r\n        socket.onclose = (event) => {\r\n          dispatch({ type: onClose, payload: event });\r\n        };\r\n      }\r\n      if (wsClose && type === wsClose && socket) {\r\n        socket.close();\r\n        socket = null;\r\n      }\r\n\r\n      if (wsSendMessage && type === wsSendMessage && socket) {\r\n        const message = {\r\n          ...payload,\r\n          token: getCookie(\"accessToken\"),\r\n        };\r\n        socket.send(JSON.stringify(message));\r\n      }\r\n\r\n      if (wsPingPong && type === wsPingPong && socket) {\r\n        socket.send(\"pong\");\r\n      }\r\n\r\n      next(action);\r\n    };\r\n  };\r\n};","import { WS_CONNECTION_SUCCESS, WS_CONNECTION_ERROR, WS_CONNECTION_CLOSED, WS_GET_ORDERS } from \"../actions/wsActions\";\r\nimport { TinitialStateWS } from \"./types\";\r\n\r\nexport const initialStateWS: TinitialStateWS = {\r\n  wsConnected: false,\r\n  wsError: false,\r\n  data: {data: {\r\n    orders: [],\r\n    total: 0,\r\n    totalToday: 0,\r\n  },}\r\n};\r\n\r\nexport const wsReducer = (state = initialStateWS, action): TinitialStateWS => {\r\n  switch (action.type) {\r\n    case WS_CONNECTION_SUCCESS:\r\n      return {\r\n        ...state,\r\n        wsConnected: true,\r\n      };\r\n    case WS_CONNECTION_ERROR:\r\n      return {\r\n        ...state,\r\n        wsConnected: false,\r\n        wsError: true,\r\n      };\r\n    case WS_CONNECTION_CLOSED:\r\n      return {\r\n        ...state,\r\n        wsConnected: false,\r\n        wsError: false,\r\n      };\r\n    case WS_GET_ORDERS:\r\n      return {\r\n        ...state,\r\n        data: action.payload,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};","import { combineReducers } from \"redux\";\r\nimport { errorsReducer } from \"./errorsReducer\";\r\nimport { getIngredientsListReducer } from \"./ingredientsListReducer\";\r\nimport { getConstructorIngredientsReducer } from \"./constructorIngredientsReducer\";\r\nimport { getIngredientInfoReducer } from \"./ingredientInfoReducer\";\r\nimport { modalReducer } from \"./modalReducer\";\r\nimport { getOrderReducer } from \"./orderReducer\";\r\nimport { userInfoReducer } from \"./userInfoReducer\";\r\nimport { wsReducer } from \"./wsReducer\";\r\n\r\nconst rootReducer = combineReducers({\r\n  burgerIngredients: getIngredientsListReducer,\r\n  constructorOfOrder: getConstructorIngredientsReducer,\r\n  burgerIngredient: getIngredientInfoReducer,\r\n  order: getOrderReducer,\r\n  modal: modalReducer,\r\n  errors: errorsReducer,\r\n  authInfoUser: userInfoReducer,\r\n  ws: wsReducer,\r\n});\r\n\r\nexport default rootReducer;","import { compose, createStore, applyMiddleware } from \"redux\";\r\nimport thunk, { ThunkAction } from \"redux-thunk\";\r\nimport rootReducer from \"./reducers\";\r\nimport {\r\n  WS_CONNECTION_START,\r\n  WS_CONNECTION_SUCCESS,\r\n  WS_GET_ORDERS,\r\n  WS_SEND_MESSAGE,\r\n  WS_SEND_PONG,\r\n  WS_CONNECTION_ERROR,\r\n  WS_CONNECTION_CLOSED,\r\n  WS_CONNECTION_END,\r\n} from \"./actions/wsActions\";\r\n\r\nimport { socketMiddleware } from \"./socketMiddleware\";\r\nimport { TApplicationActions } from \"./actions/types\";\r\n\r\nexport const wsUrl = \"wss://norma.nomoreparties.space/orders/all\";\r\n\r\nexport const wsActions = {\r\n  wsStart: WS_CONNECTION_START,\r\n  wsSendMessage: WS_SEND_MESSAGE,\r\n  onOpen: WS_CONNECTION_SUCCESS,\r\n  wsClose: WS_CONNECTION_END,\r\n  onClose: WS_CONNECTION_CLOSED,\r\n  onError: WS_CONNECTION_ERROR,\r\n  onGetOrders: WS_GET_ORDERS,\r\n  wsPingPong: WS_SEND_PONG,\r\n};\r\n\r\nconst socketFeedOrdersMiddlware = socketMiddleware(wsUrl, wsActions);\r\n\r\ndeclare global {\r\n  interface Window {\r\n    __REDUX_DEVTOOLS_EXTENSION_COMPOSE__?: typeof compose;\r\n  }\r\n}\r\n\r\nconst composeEnhancers =\r\n  typeof window === \"object\" && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__\r\n    ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__\r\n    : compose;\r\n\r\nconst enhancer = composeEnhancers(\r\n  applyMiddleware(thunk, socketFeedOrdersMiddlware)\r\n);\r\n\r\nexport const store = createStore(rootReducer, enhancer);\r\nexport type RootState = ReturnType<typeof rootReducer>\r\n// export type AppDispatch = typeof store.dispatch;\r\nexport type Dispatch = <TReturnType = void>(action: AppActions | AppThunk) => TReturnType;\r\nexport type AppActions = TApplicationActions;\r\nexport type AppThunk<ReturnType = void> =\r\n  ThunkAction<ReturnType, RootState, unknown, AppActions>;","import React from \"react\";\r\nimport styles from \"./profile.module.css\";\r\nimport ProfileMenu from \"../../components/ProfileMenu/ProfileMenu\";\r\nimport Order from \"../../components/Order/Order\";\r\nimport { Link, useLocation } from \"react-router-dom\";\r\nimport { wsActions } from \"../../services/store\";\r\nimport { getCookie } from \"../../utils/helpers\";\r\nimport { useAppDispatch, useAppSelector } from \"../../utils/hooks\";\r\nimport { TOrder } from \"../../services/actions/types\";\r\n\r\nfunction ProfileOrders() {\r\n  const location = useLocation();\r\n  const dispatch = useAppDispatch();\r\n  const token = getCookie(\"token\");\r\n\r\n  const { dataOrders, wsConnected } = useAppSelector((store) => ({\r\n    dataOrders: store.ws.data,\r\n    wsConnected: store.ws.wsConnected,\r\n  }));\r\n  const data = dataOrders && dataOrders.data && dataOrders.data.orders;\r\n\r\n  React.useEffect(() => {\r\n    dispatch({\r\n      type: wsActions.wsStart,\r\n      payload: `wss://norma.nomoreparties.space/orders?token=${token}`,\r\n    });\r\n    return () => {\r\n      dispatch({ type: wsActions.wsClose });\r\n    };\r\n  }, [dispatch, token]);\r\n\r\n  return wsConnected && data ? (\r\n    <section className={styles.profile_orders_container}>\r\n      <div className={styles.profile_orders_menu}>\r\n        <ProfileMenu />\r\n      </div>\r\n      <div className={styles.profile_orders}>\r\n        <ul className={styles.profile_orders_list}>\r\n          {data.map((item: TOrder, index: number) => {\r\n            if (item.ingredients.length > 0) {\r\n              return (\r\n                <li className={styles.profile_order} key={index}>\r\n                  <Link\r\n                    to={{\r\n                      pathname: `/profile/orders/${item.number}`,\r\n                      state: { backgroundOrder: location },\r\n                    }}\r\n                  >\r\n                    <Order order={item} />\r\n                  </Link>\r\n                </li>\r\n              );\r\n            }\r\n            return null;\r\n          })}\r\n        </ul>\r\n      </div>\r\n    </section>\r\n  ) : null;\r\n}\r\n\r\nexport default ProfileOrders;","import React from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\n\r\ninterface IProtectedRoute {\r\n  children: React.ReactNode | null;\r\n  path: string;\r\n  exact: boolean;\r\n}\r\n\r\nfunction ProtectedRoute({ children, ...props }: IProtectedRoute) {\r\n  const isToken = localStorage.getItem(\"refreshToken\");\r\n\r\n  return (\r\n    <Route\r\n      {...props}\r\n      render={({ location }) =>\r\n        isToken ? (\r\n          children\r\n        ) : (\r\n          <Redirect\r\n            to={{\r\n              pathname: \"/login\",\r\n              state: { from: location },\r\n            }}\r\n          />\r\n        )\r\n      }\r\n    />\r\n  );\r\n}\r\n\r\nexport default ProtectedRoute;","import React from \"react\";\r\nimport styles from \"../../components/IngredientDetails/IngredientDetails.module.css\";\r\nimport { Button } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { useParams, useHistory } from \"react-router-dom\";\r\nimport { addConstructorIngredient } from \"../../services/actions/burgerActions\";\r\nimport { closeModals } from \"../../services/actions/modalActions\";\r\nimport { useAppDispatch, useAppSelector } from \"../../utils/hooks\";\r\n\r\n\r\nfunction IngredientDetailsPage():JSX.Element | null {\r\n  const history = useHistory();\r\n  const dispatch = useAppDispatch();\r\n  const { id } = useParams();\r\n  const { ingredients } = useAppSelector((store) => ({\r\n    ingredients: store.burgerIngredients.ingredients,\r\n  }));\r\n\r\n  const currentIngredient: any = ingredients.filter(({ _id }: {_id: string}) => {\r\n    return _id === id;\r\n  })[0];\r\n\r\n  function handleAddIngredient(): void {\r\n    dispatch(addConstructorIngredient(currentIngredient));\r\n    dispatch(closeModals());\r\n    history.push(\"/\");\r\n  }\r\n\r\n\r\n  return (currentIngredient && <div className={`${styles.container} mb-15`}>\r\n      <img src={currentIngredient.image_large} alt={currentIngredient.name}/>\r\n      <p className=\"text text_type_main-medium mt-6 mb-10\">{currentIngredient.name}</p>\r\n        <ul className={styles.details}>\r\n          <li className={styles.list}>\r\n            <p className=\"text text_type_main-default text_color_inactive\">,</p>\r\n            <p className=\"text ttext_type_digits-default text_color_inactive\">{currentIngredient.calories}</p>\r\n          </li>\r\n          <li>\r\n            <p className=\"text text_type_main-default text_color_inactive\">, </p>\r\n            <p className=\"text text_type_digits-default text_color_inactive\">{currentIngredient.proteins}</p>\r\n          </li>\r\n          <li>\r\n            <p className=\"text text_type_main-default text_color_inactive\">, </p>\r\n            <p className=\"text text_type_digits-default text_color_inactive\">{currentIngredient.fat}</p>\r\n          </li>\r\n          <li>\r\n            <p className=\"text text_type_main-default text_color_inactive\">, </p>\r\n            <p className=\"text text_type_digits-default text_color_inactive\">{currentIngredient.carbohydrates}</p>\r\n          </li>\r\n        </ul>\r\n        <div className={styles.ingredient_button} onClick={handleAddIngredient}>\r\n          <Button type=\"primary\" size=\"large\">\r\n              \r\n          </Button>\r\n        </div>\r\n    </div>)\r\n}\r\n\r\nexport default IngredientDetailsPage;","import React from \"react\";\r\nimport styles from \"./feed.module.css\";\r\nimport Order from \"../../components/Order/Order\";\r\nimport { Link, useLocation } from \"react-router-dom\";\r\nimport { wsActions, wsUrl } from \"../../services/store\";\r\nimport { useAppDispatch, useAppSelector } from \"../../utils/hooks\";\r\nimport { wsConnectionStart } from \"../../services/actions/wsActions\";\r\nimport { TOrder } from \"../../services/actions/types\";\r\n\r\nfunction Feed() {\r\n  const dispatch = useAppDispatch();\r\n  const { wsDataOrders, wsConnected } = useAppSelector((store) => ({\r\n    wsDataOrders: store.ws.data,\r\n    wsConnected: store.ws.wsConnected,\r\n  }));\r\n  const location = useLocation();\r\n\r\n  React.useEffect(() => {\r\n    dispatch(wsConnectionStart(wsUrl));\r\n    return () => {\r\n      dispatch({ type: wsActions.wsClose });\r\n    };\r\n  }, [dispatch]);\r\n\r\n  const dataOrders = wsDataOrders && wsDataOrders && wsDataOrders.data.orders;\r\n  const ReadyOrders =\r\n    dataOrders && dataOrders.filter((item: TOrder) => item.status === \"done\");\r\n  const WorkOrders =\r\n    dataOrders &&\r\n    dataOrders.filter((item: TOrder) => item.status === \"pending\");\r\n\r\n  return wsConnected && dataOrders ? (\r\n    <section className={styles.feed}>\r\n      <h1 className={styles.feed_title}> </h1>\r\n      <div className={styles.feed_orders}>\r\n        <ul className={styles.feed_orders_list}>\r\n          {dataOrders.map((item: TOrder) => {\r\n            return (\r\n              <li className={styles.feed_order} key={item._id}>\r\n                <Link\r\n                  to={{\r\n                    pathname: `/feed/${item.number}`,\r\n                    state: { backgroundOrder: location },\r\n                  }}\r\n                >\r\n                  <Order order={item} />\r\n                </Link>\r\n              </li>\r\n            );\r\n          })}\r\n        </ul>\r\n        <div className={styles.feed_orders_summury}>\r\n          <div className={styles.feed_orders_status}>\r\n            <div className={styles.feed_orders_ready}>\r\n              <p className={styles.feed_orders_title}>:</p>\r\n              <ul className={styles.feed_list}>\r\n                {ReadyOrders.map((item: TOrder, index: number) => {\r\n                  if (index < 10) {\r\n                    return (\r\n                      <li\r\n                        className={styles.feed_orders_ready_item}\r\n                        key={item._id}\r\n                      >\r\n                        {item.number}\r\n                      </li>\r\n                    );\r\n                  }\r\n                  return null;\r\n                })}\r\n              </ul>\r\n            </div>\r\n            <div className={styles.feed_orders_ready}>\r\n              <p className={styles.feed_orders_title}>:</p>\r\n              <ul className={styles.feed_list}>\r\n                {ReadyOrders.map((item: TOrder, index: number) => {\r\n                  if (index > 9 && index < 20) {\r\n                    return (\r\n                      <li\r\n                        className={styles.feed_orders_ready_item}\r\n                        key={item._id}\r\n                      >\r\n                        {item.number}\r\n                      </li>\r\n                    );\r\n                  }\r\n                  return null;\r\n                })}\r\n              </ul>\r\n            </div>\r\n            <div className={styles.feed_orders_work}>\r\n              <p className={styles.feed_orders_title}> :</p>\r\n              <ul className={styles.feed_list}>\r\n                {WorkOrders.map((item: TOrder, index: number) => {\r\n                  if (index > 10) {\r\n                    return null;\r\n                  }\r\n                  return (\r\n                    <li className={styles.feed_orders_work_item} key={item._id}>\r\n                      {item.number}\r\n                    </li>\r\n                  );\r\n                })}\r\n              </ul>\r\n            </div>\r\n          </div>\r\n          <div className={styles.order_count}>\r\n            <p className={styles.feed_orders_title}>   :</p>\r\n            <p className={styles.feed_orders_count}>\r\n              {wsDataOrders.data ? wsDataOrders.data.total - 1 : \"none\"}\r\n            </p>\r\n          </div>\r\n          <div className={styles.order_count}>\r\n            <p className={styles.feed_orders_title}>  :</p>\r\n            <p className={styles.feed_orders_count}>\r\n              {wsDataOrders.data ? wsDataOrders.data.totalToday - 1 : \"none\"}\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  ) : null;\r\n}\r\n\r\nexport default React.memo(Feed);","import React from \"react\";\r\nimport styles from \"./Order.module.css\";\r\nimport { CurrencyIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { updateDate } from \"../../utils/helpers\";\r\nimport { optionsDate } from \"../../utils/constants\";\r\nimport { authApi } from \"../../services/actions\";\r\nimport { showError } from \"../../services/actions/modalActions\";\r\nimport { useAppDispatch, useAppSelector } from \"../../utils/hooks\";\r\n\r\nimport { TIngredient } from \"../../services/actions/types\";\r\n\r\ninterface IOrderProps {\r\n  order: any;\r\n  date: number;\r\n  number: number;\r\n  name: string;\r\n  status: string;\r\n  price: number;\r\n  ingredients: [string];\r\n  createdAt: number;\r\n};\r\n\r\nfunction OrderItem() {\r\n  const dispatch = useAppDispatch();\r\n  const [order, setOrder] = React.useState<IOrderProps>();\r\n  const { id } = useParams<{ id?: string }>();\r\n  const { ingredients } = useAppSelector((store) => ({\r\n    ingredients: store.burgerIngredients.ingredients,\r\n  }));\r\n  const orderIngredients: any =\r\n    ingredients &&\r\n    order &&\r\n    order.ingredients.map((id: string) =>\r\n      ingredients.find((item: TIngredient) => item._id === id)\r\n    );\r\n  const orderDate = order && updateDate(order.createdAt, optionsDate);\r\n  const orderPrice =\r\n    orderIngredients &&\r\n    ingredients &&\r\n    orderIngredients.reduce(function (prevValue: number, item: TIngredient) {\r\n      return prevValue + item.price;\r\n    }, 0);\r\n\r\n  React.useEffect(() => {\r\n    authApi\r\n      .getCurrentOrder(id)\r\n      .then((res) => {\r\n        setOrder(res.orders[0]);\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n        dispatch(showError(error));\r\n      });\r\n  }, [dispatch, id]);\r\n\r\n  return order ? (\r\n    <section className={styles.order_item}>\r\n      <p className={styles.order_number}>#{order.number}</p>\r\n      <p className={styles.order_item_name}>{order.name}</p>\r\n      <p\r\n        className={`${styles.order_status} ${\r\n          order.status === \"\" && styles.order_status_finished\r\n        } ${order.status === \"\" && styles.order_status_cancelled}`}\r\n      >\r\n        {order.status === \"done\" ? \"\" : \"\"}\r\n      </p>\r\n      <p className={styles.order_title}>:</p>\r\n      <div className={styles.order_ingredients_container}>\r\n        {order &&\r\n          orderIngredients &&\r\n          orderIngredients.map((item: TIngredient, index: number) => {\r\n            return (\r\n              <div className={styles.order_ingredient_item} key={index}>\r\n                <div className={styles.order_ingredient_container}>\r\n                  <img\r\n                    className={`${styles.order_ingredient_img}`}\r\n                    src={item.image_mobile}\r\n                    alt={item.name}\r\n                  />\r\n                  <p className={styles.order_ingredient_name}>{item.name}</p>\r\n                </div>\r\n                <div className={styles.order_price_container}>\r\n                  <p className={styles.order_price}>1 x {item.price}</p>\r\n                  <CurrencyIcon type=\"primary\" />\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n      </div>\r\n      <div className={styles.order_total}>\r\n        <p className={styles.order_date}>{orderDate}</p>\r\n        <div className={styles.order_price_container}>\r\n          <p className={styles.order_price}>{orderPrice}</p>\r\n          <CurrencyIcon type=\"primary\" />\r\n        </div>\r\n      </div>\r\n    </section>\r\n  ) : null;\r\n}\r\n\r\nexport default OrderItem;","import React from 'react';\r\nimport styles from './App.module.css';\r\nimport AppHeader from '../AppHeader/AppHeader';\r\nimport BurgerIngredients from '../BurgerIngredients/BurgerIngredients';\r\nimport BurgerConstructor from '../BurgerConstructor/BurgerConstructor';\r\n\r\nimport OrderDetails from '../OrderDetails/OrderDetails';\r\nimport IngredientDetails from '../IngredientDetails/IngredientDetails';\r\nimport Modal from '../Modal/Modal';\r\nimport { DndProvider } from \"react-dnd\";\r\nimport { HTML5Backend } from \"react-dnd-html5-backend\";\r\nimport {\r\n  Router,\r\n  Route,\r\n  Switch,\r\n  useHistory,\r\n  useLocation,\r\n} from \"react-router-dom\";\r\nimport { RegisterPage } from '../../pages';\r\nimport { LoginPage } from '../../pages/login';\r\nimport { ForgetPassPage } from '../../pages/forgetPass';\r\nimport { ResetPassPage } from '../../pages/resetPass';\r\nimport { ProfileOrders, ProfilePage } from '../../pages/profile';\r\nimport ProtectedRoute from '../ProtectedRoute/ProtectedRoute';\r\nimport { IngredientDetailsPage } from '../../pages/ingredientDetail';\r\nimport { Feed } from '../../pages/feed';\r\nimport OrderItem from '../Order/OrderItem';\r\nimport { useAppDispatch, useAppSelector } from '../../utils/hooks';\r\nimport { getIngredients } from '../../services/actions/burgerActions';\r\nimport { hideModalOrder, showModalOrder, hideModal, hideModalError } from '../../services/actions/modalActions';\r\n\r\nfunction App() {\r\n  const { isModalOpened, isModalOpenedOrder, currentIngredient, error, isModalOpenedError, isLoading } = useAppSelector(\r\n    (store) => ({\r\n      isModalOpened: store.modal.isModalOpened,\r\n      isModalOpenedOrder: store.modal.isModalOpenedOrder,\r\n      isModalOpenedError: store.modal.isModalOpenedError,\r\n      currentIngredient: store.burgerIngredient.currentIngredient,\r\n      error: store.errors.error,\r\n      isLoading: store.burgerIngredients.isLoading,\r\n    })\r\n  );\r\n  const history = useHistory();\r\n  let location = useLocation();\r\n  const dispatch = useAppDispatch();\r\n  const backgroundIngredient = (history.action === 'PUSH' || history.action === 'REPLACE') && location.state && location.state.backgroundIngredient\r\n\r\n  React.useEffect(() => {\r\n    dispatch(getIngredients())\r\n  }, [dispatch])\r\n\r\n  function closeModalOrder() {\r\n    dispatch(hideModalOrder())\r\n  };\r\n\r\n  function openModalOrder() {\r\n    dispatch(showModalOrder())\r\n  };\r\n\r\n  function closeModalIngredient() {\r\n    dispatch(hideModal())\r\n  };\r\n\r\n\r\n  function closeModalError() {\r\n    dispatch(hideModalError())\r\n  };\r\n\r\n  return (\r\n    isLoading ? <Router history={history}>\r\n      <AppHeader />\r\n      <Switch location={backgroundIngredient || location}>\r\n        <Route exact path=\"/registration\">\r\n          <RegisterPage />\r\n        </Route>\r\n        <Route exact path=\"/login\">\r\n          <LoginPage />\r\n        </Route>\r\n        <Route exact path=\"/forgot-password\">\r\n          <ForgetPassPage />\r\n        </Route>\r\n        <Route exact path=\"/reset-password\">\r\n          <ResetPassPage />\r\n        </Route>\r\n        <Route exact path=\"/feed\">\r\n          <Feed />\r\n        </Route>\r\n        <Route exact path=\"/feed/:id\">\r\n          <OrderItem />\r\n        </Route>\r\n        <ProtectedRoute exact path=\"/profile\">\r\n          <ProfilePage />\r\n        </ProtectedRoute>\r\n        <ProtectedRoute exact path=\"/profile/orders\">\r\n          <ProfileOrders />\r\n        </ProtectedRoute>\r\n        <ProtectedRoute exact path=\"/profile/orders/:id\">\r\n          <OrderItem />\r\n        </ProtectedRoute>\r\n        <Route exact path=\"/ingredients/:id\">\r\n          <IngredientDetailsPage />\r\n        </Route>\r\n        <Route exact path=\"/\">\r\n          <div className={`${styles.wrap} pl-5 pr-5 pt-10`}>\r\n            <DndProvider backend={HTML5Backend}>\r\n              { isLoading ? \r\n                <>\r\n                  <BurgerIngredients /> \r\n                  <BurgerConstructor \r\n                    openModalOrder={openModalOrder} />\r\n                </>\r\n                : <div>Loading...</div>\r\n              }\r\n            </DndProvider>\r\n          </div>\r\n          {currentIngredient && <Modal\r\n            closeModal={closeModalIngredient}\r\n            isModalOpened={isModalOpened}\r\n            title=\" \">\r\n            <IngredientDetails />\r\n          </Modal>}\r\n          <Modal\r\n            closeModal={closeModalOrder}\r\n            isModalOpened={isModalOpenedOrder}>\r\n            <OrderDetails />\r\n          </Modal>\r\n          <Modal\r\n            closeModal={closeModalError}\r\n            isModalOpened={isModalOpenedError}>\r\n            <p className={styles.error}>{Object.values(error)}</p>\r\n          </Modal>\r\n        </Route>\r\n        <Route>\r\n          <p>  </p>\r\n        </Route>\r\n      </Switch>\r\n    </Router> : <div>Loading...</div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './components/App/App';\r\nimport { Provider } from \"react-redux\";\r\nimport { store } from \"./services/store\";\r\nimport { BrowserRouter } from \"react-router-dom\";\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <React.StrictMode>\r\n      <BrowserRouter>\r\n        <App />\r\n      </BrowserRouter>\r\n    </React.StrictMode>\r\n  </Provider>,\r\n  document.getElementById('root')\r\n);\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"input_container\":\"CustomInput_input_container__2fY8Y\",\"input\":\"CustomInput_input__1w6YC\",\"input_label\":\"CustomInput_input_label__1yWfK\",\"input_profile\":\"CustomInput_input_profile__3Ia1I\",\"input_profile_label\":\"CustomInput_input_profile_label__2qg1F\",\"input_profile_data\":\"CustomInput_input_profile_data__Tggn0\",\"input_eye\":\"CustomInput_input_eye__2USGF\",\"input_pencil\":\"CustomInput_input_pencil__1PhaS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"IngredientDetails_container__37Zir\",\"details\":\"IngredientDetails_details__33Rb0\",\"list\":\"IngredientDetails_list__3e5hm\",\"ingredient_button\":\"IngredientDetails_ingredient_button__PC5MY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"tabs\":\"BurgerIngredients_tabs__1bpy_\",\"ingredients\":\"BurgerIngredients_ingredients__2aj52\",\"list-ingredients\":\"BurgerIngredients_list-ingredients__p85Tf\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ingredient\":\"BurgerIngredient_ingredient__3El_J\",\"price-wrap\":\"BurgerIngredient_price-wrap__FAPVO\",\"name\":\"BurgerIngredient_name__3SD3-\",\"link\":\"BurgerIngredient_link__2q_sC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"construct\":\"BurgerConstructor_construct__1LXFx\",\"list-ingredients\":\"BurgerConstructor_list-ingredients__1pVty\",\"order-wrap\":\"BurgerConstructor_order-wrap__zFiBo\",\"price-wrap\":\"BurgerConstructor_price-wrap__3ylOX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"popup\":\"Modal_popup__bAzDL\",\"popupOpened\":\"Modal_popupOpened__2UXf4\",\"titleWrap\":\"Modal_titleWrap__3j7pO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"order_container\":\"Order_order_container__38wUA\",\"order\":\"Order_order___7hZK\",\"order_header\":\"Order_order_header__7CmKx\",\"order_number\":\"Order_order_number__DvHXA\",\"order_date\":\"Order_order_date__3e1NX\",\"order_name\":\"Order_order_name__1drAc\",\"order_status\":\"Order_order_status__2KqzU\",\"order_status_finished\":\"Order_order_status_finished__2YLCY\",\"order_status_cancelled\":\"Order_order_status_cancelled__2Uwou\",\"order_ingredients\":\"Order_order_ingredients__3z5Zb\",\"order_img_container\":\"Order_order_img_container__2jn9b\",\"order_img\":\"Order_order_img__3M46x\",\"order_price_container\":\"Order_order_price_container__3HRwr\",\"order_price\":\"Order_order_price__3CGRv\",\"order_item\":\"Order_order_item__1fKA3\",\"order_ingredients_container\":\"Order_order_ingredients_container__2IohT\",\"order_ingredient_item\":\"Order_order_ingredient_item__2CimQ\",\"order_title\":\"Order_order_title__Sqv82\",\"order_item_name\":\"Order_order_item_name__AyQHl\",\"order_total\":\"Order_order_total__3mIAa\",\"order_ingredient_name\":\"Order_order_ingredient_name__2AWlb\",\"order_ingredient_img\":\"Order_order_ingredient_img__2auEJ\",\"order_ingredient_container\":\"Order_order_ingredient_container__3MeQE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrap\":\"App_wrap__3cTIO\",\"error\":\"App_error__3Essr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list-item-wrap\":\"constructor-item_list-item-wrap__1KEfp\",\"ingredient\":\"constructor-item_ingredient__2e8qD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"OrderDetails_container__1-Wou\",\"wrapIcon\":\"OrderDetails_wrapIcon__2S2Rt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"ModalOverlay_overlay__Up8kR\",\"overlayOpened\":\"ModalOverlay_overlayOpened__2JsrV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form_container\":\"common_form_container__KSLn5\",\"form_title\":\"common_form_title__2K1K1\",\"form_button\":\"common_form_button__3Vx7d\",\"form_paragraph\":\"common_form_paragraph__2FUa0\",\"form_error\":\"common_form_error__3cQ-z\",\"form_message\":\"common_form_message__3Ylgw\"};"],"sourceRoot":""}